"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3437],{89558:(e,t,r)=>{r.d(t,{q:()=>i});var n=r(69160),l=r(10556),s=r(28255),a=r(79995);function i(e){let{error:t}=e;return(0,a.useEffect)(()=>{(0,l.j)("ErrorBoundaryError",{message:t.message,stack:t.stack,digest:t.digest,cause:t.cause,name:t.name})},[t]),(0,n.jsx)("div",{className:"mx-auto flex h-full max-w-2xl items-center justify-center px-4 text-lg font-medium text-red-600 md:text-xl lg:text-2xl",children:(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-red-600",children:[(0,n.jsx)("div",{className:"border-border bg-background flex size-8 items-center justify-center rounded-sm border p-2",children:(0,n.jsx)(s.d,{})}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center gap-2",children:[(0,n.jsxs)("h1",{className:"text-base font-medium",id:"error",children:["An Error Occurred"," "]}),t.message?(0,n.jsx)("h2",{className:"text-center text-sm font-normal text-gray-500",children:(0,n.jsx)("code",{className:"tracking-tight",children:t.message})}):null]})]})})}},896:(e,t,r)=>{r.d(t,{ForkBlockButton:()=>j});var n=r(69160),l=r(79995),s=r(10556),a=r(18396),i=r(32960);let o=(0,r(9509).$)("beac12612e6060905cab0c4dec54dc0209be94b6");var c=r(97077),d=r(70934),u=r(91303),v=r(59700),p=r(66694),m=r(14905),f=r(76811),x=r(20419),h=r(24815),g=r(98985),b=r(94835),w=r(88375);function j(e){let{blockId:t,forkCount:r,className:j,page:y,isAuthor:N}=e,{expectUser:P}=(0,w.a)(),{user:E,activeScopeSlug:k}=(0,g.PK)(),{authorId:R}=(0,f.xN)(),{setShowSignInDialog:T}=(0,b.p)(),I=(0,l.useMemo)(()=>N||(null==E?void 0:E.id)===R,[N,null==E?void 0:E.id,R]),U=(0,m.useRouter)(),[_,S]=(0,l.useTransition)(),{isStreaming:O}=(0,x.RN)(),A=(0,h.N)("forkBlockButton"),C=(0,l.useCallback)(e=>{e.preventDefault();let r=new URLSearchParams;r.set("forkBlockId",t);let n="http://localhost:3000/chat";n="https://v0.dev/chat";let l="".concat(n,"?").concat(r.toString());if(!P)return T({prompt:!1,forkBlockId:t});(0,s.j)("ClickForkBlock");try{S(async()=>{if("chat"===y){let e=await o(t,k);U.push("/chat/".concat(e))}if(c.Am.success(A("successToast")),"block"===y){var e;null===(e=window.open(l,"_blank"))||void 0===e||e.focus()}})}catch(e){(0,d.R)(e)||(c.Am.error(A("errorToast")),console.error(e))}},[P,T,y,A,t,k,U]),D=null;D="block"===y?"secondary":I?"ghost":"secondary";let z="block"===y||!I;return(0,n.jsxs)(a.z,{className:(0,v.cn)("group px-2",r&&"md:has-[>svg]:pr-2",j),disabled:_||O,onClick:C,tooltip:z?void 0:A("fork"),size:"sm",variant:D,children:[_?(0,n.jsx)(p.$,{className:"!size-3.5 text-gray-500 md:!size-4",size:16}):(0,n.jsx)(i.X,{className:"!size-3.5 md:!size-4"}),z?A("fork"):null,r?(0,n.jsx)(u.C,{className:"bg-gray-150 hidden min-w-5 border-0 text-gray-500 group-hover:bg-gray-300 group-hover:text-gray-600 md:flex",size:"sm",variant:"secondary",children:(0,n.jsx)("span",{className:"translate-y-[0.5px]",children:r})}):null]})}},67365:(e,t,r)=>{r.d(t,{E:()=>v,o:()=>u});var n=r(69160),l=r(56267),s=r(53639),a=r(12885),i=r(62558),o=r(79995),c=r(59700),d=r(45550);let u=o.memo(function(e){let{children:t}=e;return t.length>1e4?(0,n.jsx)("p",{children:t}):(0,n.jsx)(s.D,{components:{pre:e=>(0,n.jsx)("pre",{...e,className:"bg-background border-alpha-400 rounded-lg border p-2"}),code:e=>{let{inline:t,children:r,...l}=e;return t?(0,n.jsx)("code",{...l,className:"rounded-[0.375rem] border bg-gray-100 px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",children:r}):(0,n.jsx)("code",{...l,className:"text-foreground px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal",children:r})}},children:t})});function v(e){var t;let{message:r,className:s}=e,o=(0,l.c)(r);return"string"==typeof r.content?(0,n.jsx)(i.M,{className:(0,c.cn)("w-full",s),children:(0,n.jsx)(u,{children:r.content})},o):(0,d.ib)(r)?null:(0,n.jsx)("div",{className:(0,c.cn)("flex-1 text-sm",s),children:(0,n.jsx)(a.Th,{messageId:o,role:r.role,rows:null!==(t=r.content)&&void 0!==t?t:[],streaming:r.streaming})},o)}},57667:(e,t,r)=>{r.d(t,{f:()=>i});var n=r(69160),l=r(59700),s=r(65317),a=r(20419);function i(e){let{tabFiles:t,activeTabKey:r,className:s,setActiveTabKey:a}=e,i=t.find(e=>e.key===r);if(!i)throw Error("Active tab not found");let c=(0,n.jsxs)("div",{className:"relative flex min-w-0 flex-1 items-center gap-2 overflow-x-auto",children:[t.map(e=>(0,n.jsx)(o,{active:e.key===i.key,onClick:()=>a(e.key),disabled:e.disabled,tooltip:e.tooltip,children:e.display},e.key)),(0,n.jsx)("div",{className:"from-muted pointer-events-none sticky -right-2 z-10 h-full min-w-8 bg-gradient-to-l via-80% bg-blend-lighten",style:{backgroundImage:"linear-gradient(to left, var(--tw-gradient-stops))"}})]}),d=(0,n.jsx)("div",{className:"flex h-full items-center justify-end gap-1",children:i.actions});return(0,n.jsxs)("div",{className:(0,l.cn)("bg-muted flex size-full flex-col",s),children:[(0,n.jsxs)("div",{className:"border-alpha-200 relative flex justify-between border-y p-2",children:[c,d]}),(0,n.jsx)("div",{className:"bg-muted relative size-full min-h-0 flex-1",children:t.map(e=>(0,n.jsx)("div",{className:(0,l.cn)("size-full",i.key===e.key?"block":"invisible h-0 overflow-hidden"),children:e.content},e.key))})]})}function o(e){let{active:t,children:r,disabled:i,onClick:o,tooltip:c}=e,{isStreaming:d}=(0,a.RN)(),u=(0,n.jsx)("button",{className:(0,l.cn)("font-regular group h-7 max-w-56 whitespace-nowrap rounded-md px-2 text-sm font-medium transition-all",t?"bg-alpha-200 text-gray-900":"hover:bg-alpha-200 bg-transparent text-gray-500",i&&!t&&"cursor-not-allowed hover:bg-transparent"),onClick:o,disabled:i,"data-testid":"tab-file-button",children:(0,n.jsx)("div",{className:"truncate",children:r})});return c||i?(0,n.jsx)(s.Tooltip,{side:"bottom",className:"max-w-[250px] text-wrap text-center",content:c||(d?"Preview is loading":"Preview is disabled"),children:u}):u}},97038:(e,t,r)=>{r.d(t,{e:()=>d});var n=r(69160),l=r(79995),s=r(68257),a=r(59700),i=r(26548),o=r(96261);function c(e){let{show:t,axis:r,side:l,resizing:s,dotsHandle:i,onMouseDown:o,onFocus:c,onBlur:d,ref:u}=e,v={"aria-orientation":"x"===r?"vertical":"horizontal",onBlur:d,onFocus:c,onMouseDown:o,ref:u,role:"separator",tabIndex:0};return i?(0,n.jsx)("div",{className:(0,a.cn)("group absolute flex items-center justify-center focus:outline-none","x"===r?(0,a.cn)("inset-y-0 w-5 cursor-col-resize flex-col","start"===l?"left-[-19px]":"right-[-19px]"):(0,a.cn)("inset-x-0 h-5 cursor-row-resize flex-row","start"===l?"top-[-19px]":"bottom-[-19px]")),...v,children:(0,n.jsxs)("div",{className:"flex gap-0.5",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]}),(0,n.jsxs)("div",{className:"flex flex-col gap-0.5",children:[(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"}),(0,n.jsx)("div",{className:"size-[2.5px] rounded-full bg-gray-400 transition-colors duration-300 group-hover:bg-black group-focus:bg-black"})]})]})}):t?(0,n.jsx)("div",{className:(0,a.cn)("group absolute z-10 focus:outline-none","x"===r&&(0,a.cn)("inset-y-0 w-3 cursor-col-resize","start"===l?"-left-1.5":"-right-1.5"),"y"===r&&(0,a.cn)("inset-x-0 h-3 cursor-row-resize","start"===l?"-top-1.5":"-bottom-1.5")),...v,children:(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-0 transition-all duration-200 group-hover:bg-gray-300 group-focus:bg-gray-400","x"===r&&(0,a.cn)("mx-auto group-hover:w-[3px] group-focus:w-[3px]",s?"w-1":"w-0"),"y"===r&&(0,a.cn)("my-auto group-hover:h-[3px] group-focus:h-[3px]",s?"h-1":"h-0"))})}):null}let d=(0,l.memo)(e=>{var t,r;let{show:d,innerClassName:u,dotsHandle:v=!1,onTrack:p,className:m,initialSize:f,animated:x=!0,minSizePx:h,axis:g,side:b,children:w,cookieName:j}=e,y=(0,l.useRef)(null),N=(0,l.useRef)(null),P=(0,l.useRef)(null),[E,k]=(0,l.useState)(!1),[R,T]=(0,l.useState)(!1),[I,U]=(0,l.useState)(0),[_,S]=(0,l.useState)(0),[O,A]=(0,l.useState)(!1),C=(0,l.useRef)((0,o.ET)(j)||f),D=(0,l.useCallback)(e=>{var t,r,n,l;e.stopPropagation(),e.preventDefault(),null===(t=N.current)||void 0===t||t.focus(),T(!0),k(!0),U("x"===g?e.clientX:e.clientY),P.current=C.current,S(null!==(l="x"===g?null===(r=y.current)||void 0===r?void 0:r.clientWidth:null===(n=y.current)||void 0===n?void 0:n.clientHeight)&&void 0!==l?l:0),A(!0)},[g]),z=(0,l.useCallback)(e=>{var t,r;if(!E||!R)return;let n=null===(t=y.current)||void 0===t?void 0:t.parentElement,l=null!==(r="x"===g?null==n?void 0:n.clientWidth:null==n?void 0:n.clientHeight)&&void 0!==r?r:0,s=(_+(I-("x"===g?e.clientX:e.clientY))*("start"===b?1:-1))/l*100;"x"===g?y.current.style.width="".concat(s,"%"):y.current.style.height="".concat(s,"%"),C.current=s},[g,R,E,b,I,_]),L=(0,l.useCallback)(()=>{var e;E&&(k(!1),T(!1),null===(e=N.current)||void 0===e||e.blur(),document.cookie="".concat(j,"=").concat(C.current,"; path=/; max-age=").concat(604800),null==p||p(P.current,C.current))},[j,p,E]);return(0,i.OR)("mousemove",z),(0,i.OR)("mouseup",L),(0,i.OR)("keydown",e=>{var t,r,n,l,s;if(!E||"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let a=(e.shiftKey?12:4)*("ArrowLeft"===e.key?1:-1)*("start"===b?1:-1),i=null===(t=y.current)||void 0===t?void 0:t.parentElement,o=null!==(l="x"===g?null==i?void 0:i.clientWidth:null==i?void 0:i.clientHeight)&&void 0!==l?l:0,c=(null!==(s="x"===g?null===(r=y.current)||void 0===r?void 0:r.clientWidth:null===(n=y.current)||void 0===n?void 0:n.clientHeight)&&void 0!==s?s:0)/o*100+a;"x"===g?y.current.style.width="".concat(c,"%"):y.current.style.height="".concat(c,"%"),C.current=c},N),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:(0,a.cn)("fixed inset-0 z-50",E?"x"===g?"cursor-col-resize":"cursor-row-resize":"pointer-events-none")}),(0,n.jsxs)(s.E.div,{animate:"x"===g?{width:d?"".concat(null!==(t=C.current)&&void 0!==t?t:f,"%"):"0%",height:"100%",minWidth:d?"".concat(h,"px"):0,opacity:d?1:0}:{height:d?"".concat(null!==(r=C.current)&&void 0!==r?r:f,"%"):"0%",width:"100%",minHeight:d?"".concat(h,"px"):0,opacity:d?1:0},"aria-hidden":!d,className:(0,a.cn)("relative",m),inert:!d,initial:!1,layout:"size",onAnimationComplete:()=>{O&&A(!1)},ref:y,transition:O||!x?{type:!1}:{type:"spring",damping:25,stiffness:180,mass:1},children:[(0,n.jsx)(c,{axis:g,dotsHandle:v,onBlur:L,onFocus:()=>{k(!0),A(!0)},onMouseDown:D,ref:N,resizing:E,show:d,side:b}),(0,n.jsx)("div",{className:(0,a.cn)("absolute inset-0",u),children:w})]})]})});d.displayName="Resizable"},63902:(e,t,r)=>{r.d(t,{SP:()=>p,dr:()=>v,mQ:()=>u,nU:()=>m});var n=r(69160),l=r(79995),s=r(40464),a=r(68257),i=r(59700);let o={stiffness:300,damping:30,type:"spring",duration:.3},c=l.createContext(null);function d(){let e=l.useContext(c);if(!e)throw Error("useTabs must be used within a TabsProvider");return e}let u=l.forwardRef((e,t)=>{let{children:r,defaultValue:a,value:i,onValueChange:o,variant:d="pills",...u}=e,v=l.useId(),[p,m]=l.useState(null!=i?i:a);l.useEffect(()=>{void 0!==i&&m(i)},[i]);let f=l.useMemo(()=>({activeTab:p,setActiveTab:m,layoutId:v,variant:d}),[p,v,d]);return(0,n.jsx)(c.Provider,{value:f,children:(0,n.jsx)(s.fC,{defaultValue:a,onValueChange:e=>{m(e),null==o||o(e)},value:i,...u,ref:t,children:r})})});u.displayName=s.fC.displayName;let v=l.forwardRef((e,t)=>{let{className:r,...l}=e,{variant:a}=d();return(0,n.jsx)(s.aV,{className:(0,i.cn)("bg-background flex h-8 gap-0.5","pills"===a&&"items-center rounded-lg border px-[0.2rem] py-1","underline"===a&&"items-end border-b ",r),ref:t,...l})});v.displayName=s.aV.displayName;let p=l.forwardRef((e,t)=>{let{className:r,children:l,...c}=e,{activeTab:u,layoutId:v,variant:p}=d(),m=u===c.value;return(0,n.jsxs)(s.xz,{className:(0,i.cn)("ring-offset-background relative inline-flex justify-center gap-1.5 whitespace-nowrap rounded-md bg-transparent px-2 text-sm font-medium text-gray-500 ring-blue-600 transition-all hover:text-gray-900 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 has-[>svg]:pl-1.5 data-[state=active]:text-gray-900 [&>svg]:pointer-events-none","underline"===p?"h-8":"h-6 items-center",r),ref:t,...c,children:[m?"underline"===p?(0,n.jsx)(a.E.div,{className:"absolute inset-x-2 -bottom-px h-[2px] bg-gray-900",layoutId:"".concat(v,"-underline"),transition:o}):(0,n.jsx)(a.E.div,{className:"absolute inset-0 rounded-md bg-gray-100",layoutId:"".concat(v,"-hover"),transition:o}):null,(0,n.jsx)("span",{className:"relative z-10 flex items-center gap-1.5",children:l})]})});p.displayName=s.xz.displayName;let m=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,n.jsx)(s.VY,{className:(0,i.cn)("ring-offset-background focus-visible:ring-ring focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",r),ref:t,...l})});m.displayName=s.VY.displayName},76886:(e,t,r)=>{r.d(t,{t:()=>a,y:()=>i});var n=r(79995),l=r(59461),s=r.n(l);let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:900;return e<t},i=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=s()(()=>{t(a(window.innerWidth))},100);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}},53901:(e,t,r)=>{r.d(t,{BlockContent:()=>e$,b:()=>eX});var n=r(69160),l=r(79995),s=r(29301),a=r(27922),i=r(59700),o=r(23680),c=r(89558);function d(e){let{value:t}=e;return Array.isArray(t)?(0,n.jsx)("div",{className:"flex flex-col gap-2 font-mono text-xs leading-4 text-gray-900",children:[...t].map((e,t)=>{let[r,l]=e;return r.startsWith("image/")?(0,n.jsx)("img",{alt:"Attachment ".concat(t),src:"data:".concat(r,";base64,").concat(l)},t):r.startsWith("text/")||r.startsWith("application/")?(0,n.jsx)("div",{className:"whitespace-pre-wrap",children:l},t):null})}):null}let u=(0,l.memo)(e=>{let{value:t,className:r}=e;return(0,n.jsx)("output",{"aria-label":"Code execution output",className:(0,i.cn)("codeblock not-prose relative flex w-full flex-col overflow-y-auto font-mono text-xs",r),children:t?"error"in t?(0,n.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,n.jsx)(c.q,{error:Error(t.error,{cause:"code-execution-error"})})}):(0,n.jsxs)(n.Fragment,{children:[t.stdout.length?t.stdout.map((e,t)=>(0,n.jsx)(v,{children:e.map((e,r)=>(0,n.jsx)(a.ZP,{className:"leading-4 text-gray-900 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",collapsed:1,editable:!1,enableClipboard:!1,src:e,theme:"default"},"".concat(t,"-").concat(r,"-stdout")))},"".concat(t,"-stdout"))):null,t.stderr.length?t.stderr.map((e,t)=>(0,n.jsx)(v,{children:e.map((e,r)=>(0,n.jsx)(a.ZP,{className:"leading-4 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",collapsed:1,editable:!1,enableClipboard:!1,src:e,style:{color:"rgb(192,27,93)"}},"".concat(t,"-").concat(r,"-stderr")))},"".concat(t,"-stderr"))):null,t.returned?(0,n.jsx)(v,{children:"$$attachments"in t.returned?t.returned.$$attachments.length>0?(0,n.jsx)(d,{value:t.returned.$$attachments}):null:(0,n.jsx)(a.ZP,{className:"leading-4 [&_.jv-chevron]:ml-1 [&_.jv-chevron]:inline-block [&_.jv-chevron]:size-3 [&_.jv-chevron]:text-gray-500 [&_.jv-indent]:pl-4",collapsed:1,editable:!1,enableClipboard:!1,src:t.returned,theme:"default"})}):null]}):null})});function v(e){let{children:t}=e;return null===t?null:(0,n.jsxs)("span",{className:"border-alpha-200 flex items-baseline gap-3 border-b p-2 pl-2.5 last:border-b-0",children:[(0,n.jsx)("div",{"aria-hidden":!0,className:"select-none text-pink-600",children:(0,n.jsx)(o._,{size:8})}),t]})}u.displayName="CodeOutput";let p=(0,r(9509).$)("b9e6bb6f1fbfd86495d6b16aa85df94b82967d35");var m=r(10556),f=r(86032),x=r(773),h=r(97038),g=r(96261),b=r(34496),w=r(76339),j=r(18396),y=r(66694),N=r(89159);function P(e){let{buttonText:t="Run Code",variant:r="default",setOutput:s,codeExecutionBlockProps:a,execute:o,editedValue:c,disabled:d}=e,[u,v]=(0,l.useState)(!1);return(0,n.jsxs)(j.z,{className:"ghost"===r?"h-6 text-gray-500 has-[>svg]:px-1":"","data-testid":"run-code-button",disabled:u||d,onClick:async()=>{try{v(!0),(0,m.j)("ClickRunCode",{code:c||a.source});let e=await o(a,c);s(e)}finally{v(!1)}},size:"sm",variant:"ghost"===r?"ghost":"secondary",children:[u?(0,n.jsx)(y.$,{size:16,wrapperClassName:"text-gray-500"}):(0,n.jsx)(N.k,{className:(0,i.cn)("translate-y-[-0.5px] [&_circle]:[vector-effect:non-scaling-stroke]","ghost"===r?"text-gray-500 [&_path]:fill-gray-500":"text-gray-900 [&_path]:fill-gray-900")}),t]},"execute")}var E=r(83660),k=r(80679),R=r(30758),T=r(12312),I=r(62312),U=r(57483);function _(e){let{size:t=16,className:r}=e;return(0,n.jsxs)("svg",{className:(0,i.cn)("trash-icon overflow-visible",r),fill:"currentColor",height:t,viewBox:"0 0 16 16",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("style",{children:"\n        .trash-icon .trash-lid {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n            transform-origin: center;\n        }\n\n        button:has(.trash-icon):hover .trash-lid, button:has(.trash-icon):focus-visible .trash-lid {\n          transform: translate(-0px, -2px) rotate(-10deg);\n        }\n            \n       "}),(0,n.jsx)("path",{className:"trash-lid",clipRule:"evenodd",d:"M6.75 2.75C6.75 2.0596 7.3096 1.5 8 1.5 8.6904 1.5 9.25 2.0596 9.25 2.75V3H6.75V2.75ZM5.25 3V2.75C5.25 1.2312 6.4812 0 8 0 9.5188 0 10.75 1.2312 10.75 2.75V3H12.9201 13 15V4.5H14.25 13.8846 1.75 1V3H1.75 3.0799 5.25Z",fill:"currentColor",fillRule:"evenodd"}),(0,n.jsx)("path",{clipRule:"evenodd",d:"M2.1154 4.5H13.8846L13.1776 13.6917C13.0774 14.9942 11.9913 16 10.6849 16H5.3151C4.0087 16 2.9226 14.9942 2.8224 13.6917L2.1154 4.5ZM4.318 13.5767 3.6198 4.5H12.3802L11.682 13.5767C11.6419 14.0977 11.2075 14.5 10.6849 14.5H5.3151C4.7925 14.5 4.3581 14.0977 4.318 13.5767Z",fill:"currentColor",fillRule:"evenodd"})]})}var S=r(57667),O=r(36076),A=r(26548),C=r(20419);async function D(e,t){try{let r=await p(e.language,e.blockId,t||e.source);if("error"in r)throw Error(r.error);if(!Array.isArray(r.result.stdout)||!Array.isArray(r.result.stderr))throw Error("Unexpected response from code execution");return r.result}catch(t){let e=t instanceof Error?t.message:"Unexpected error occurred while executing the code";return(0,m.j)("CodeExecutionError",{errorCode:k.Hd,errorMsg:e}),{error:"Unable to execute code. Re-run the code or revise your message."}}}class z{static Render(e){var t,r,a,o;let{isPublished:c}=(0,T.I)(),d=(0,A.tm)(),{isCopied:v,copyToClipboard:p}=(0,w.m)({timeout:2e3}),[j,y]=l.useState(void 0),{isAuthor:N}=(0,C.RN)(),{data:k,mutate:z}=(0,f.ZP)(["block:output",e.blockId]),{data:B}=(0,f.ZP)("block:output:initial");(0,l.useEffect)(()=>{(null==B?void 0:B.id)===e.blockId&&B.result.then(e=>{z(t=>t||e.value)})},[B,e.blockId,z]);let M=k;if(void 0===M&&(null==B?void 0:B.id)===e.blockId){let e=(0,l.use)(B.result);M=null==e?void 0:e.value}let H=async()=>{if(v)return;let e=L(M);return await p(e),(0,m.j)("CopyOutputExecutable",{output:e})},W=E.K.includes(e.language),F=c?R.vQ:R.YD,V=[{key:"code",display:e.meta.file,content:(0,n.jsx)(s.d,{allowQuoting:!0,caller:"v0",className:(0,i.cn)("not-prose flex-1 grow"),editable:e.closed&&N,fileName:e.meta.file,language:e.language,onEdit:y,runnable:!0,showLineNumbers:!0,editValue:j||e.source,value:e.source,hasSourceBeenEdited:e.hasSourceBeenEdited,originalCode:e.closed?void 0:null===(t=e.diffInfo)||void 0===t?void 0:t.originalCode}),actions:(0,n.jsx)(O.G,{additionalHeaderActions:void 0,allowClose:!1,allowCopyCode:!0,allowDownloadCode:!0,caller:"v0",closeHandler:null,fileName:e.meta.file,isTabbed:!0,value:j||e.source})}],K=c?(0,n.jsx)(s.d,{originalCode:e.closed?void 0:null===(r=e.diffInfo)||void 0===r?void 0:r.originalCode,allowQuoting:!0,caller:"executable",className:"min-h-52 flex-1 rounded-md",editable:!1,fileName:e.meta.file,language:e.language,runnable:W,showLineNumbers:!0,value:e.source}):(0,n.jsx)(S.f,{activeTabKey:"code",className:"min-h-52 w-full flex-1",setActiveTabKey:()=>{},tabFiles:V});return(0,n.jsxs)("div",{className:(0,i.cn)("not-prose flex h-full w-full flex-col",c&&"bg-muted overflow-hidden rounded-md border",!d&&"opacity-0"),children:[K,W&&(0,n.jsx)(h.e,{animated:!1,axis:"y",cookieName:F,dotsHandle:!1,initialSize:null!==(o=null!==(a=e.initialOutputSize)&&void 0!==a?a:(0,g.ET)(F))&&void 0!==o?o:33,minSizePx:200,show:!0,side:"start",children:(0,n.jsx)("div",{className:"border-alpha-400 flex size-full min-h-0 flex-1 flex-col items-center justify-center border-t",children:M?(0,n.jsxs)("div",{className:"flex size-full flex-col items-stretch",children:[(0,n.jsxs)("div",{className:(0,i.cn)("flex items-center justify-between border-b px-2 py-1"),children:[(0,n.jsx)("h3",{className:"text-sm font-medium text-gray-500 select-none",children:"Output"}),(0,n.jsxs)("div",{className:"flex items-center gap-1 select-none",children:[(0,n.jsx)(P,{buttonText:"Run",codeExecutionBlockProps:e,editedValue:j,execute:D,setOutput:z,variant:"ghost"}),(0,n.jsx)("div",{className:"bg-alpha-400 h-4 w-px"}),(0,n.jsx)(b.O,{"aria-label":"Clear",onClick:()=>z(void 0),tooltip:"Clear",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(_,{})})}),(0,n.jsx)(b.O,{"aria-label":"Download",disabled:"error"in M,onClick:()=>(function(e){let t=L(e),r=new Blob([t],{type:"text/plain"}),n=URL.createObjectURL(r),l=document.createElement("a");return l.download="output.txt",l.href=n,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(n),(0,m.j)("DownloadOutputExecutable",{output:t})})(M),tooltip:"Download",children:(0,n.jsx)("span",{"aria-hidden":!0,children:(0,n.jsx)(I.K,{})})}),(0,n.jsx)(b.O,{disabled:"error"in M,onClick:H,tooltip:"Copy",children:(0,n.jsx)("span",{"aria-hidden":!0,children:v?(0,n.jsx)(x.J,{}):(0,n.jsx)(U.V,{})})})]})]}),(0,n.jsx)(u,{className:"h-full",value:M})]}):(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("p",{className:"mb-2 text-base font-medium text-gray-900",children:"No Output"}),(0,n.jsx)("p",{className:"mb-6 text-sm text-gray-500",children:e.closed?"Run the code to generate an output.":"You can execute the code after it has finished streaming."}),(0,n.jsx)(P,{codeExecutionBlockProps:e,disabled:!e.closed,editedValue:j,execute:D,setOutput:z})]})})})]})}static Actions(e){return null}}z.getIsPreviewable=()=>!1;let L=e=>{if(!e)return"No output.";if("error"in e)return"Errored output. "+e.error;if(!Array.isArray(e.stdout)||!Array.isArray(e.stderr))return"Malformed output.";if(0===e.stdout.length&&0===e.stderr.length)return"Empty output.";let t=e.stdout.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n"),r=e.stderr.map(e=>e.map(e=>JSON.stringify(e,void 0,2)).join(" ")).join("\n");return 0===e.stderr.length?t:0===e.stdout.length?"# stderr\n\n"+r:"# stdout\n\n"+t+"\n\n# stderr\n\n"+r},B=new WeakMap,M=new WeakSet,H=new WeakMap;function W(e){let t=e.replace(/_/g,"--").replace(/[^a-zA-Z0-9-]/g,"").replace(/-+$/,"");if("generated.vusercontent.net".endsWith(".vercel.sh")){let e="generated.vusercontent.net".split(".")[0].replace(/^v0-frame-/g,"");return F("".concat(e,"--").concat(t,".dev.vusercontent.net"))}return F("g-".concat(t,".vusercontent.net"))}function F(e){let t=new URL("https://example.com");return t.hostname=e,t.origin}function V(e,t){if(!e)return;let r=B.get(e);r?r.push(t):B.set(e,[t]),K(e)}function K(e){if(!M.has(e))return;let t=B.get(e);if(t){for(let n of t){var r;null===(r=e.contentWindow)||void 0===r||r.postMessage(n,e.dataset.origin||"")}t.length=0}}let Z=[];window.addEventListener("message",e=>{if(!(e.origin===W("any")||e.origin.endsWith(".vusercontent.net"))||!e.source)return;let t=Array.from(document.querySelectorAll("iframe[data-v0]")).find(t=>t instanceof HTMLIFrameElement&&t.contentWindow===e.source);if(!t)return;M.add(t),K(t),window.debug&&console.log("child event handler",e.data);let r=H.get(t);for(let t of Z)r===t.id&&t.listener(e.data)});var Y=r(63902),G=r(48235),X=r(89042),$=r(23324);function J(e){return"v0-preview-".concat(e)}function Q(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=e,{isPublished:s}=(0,T.I)(),a=(0,n.jsx)(Y.mQ,{className:"w-full",onValueChange:l,value:r,children:(0,n.jsxs)(Y.dr,{className:"relative h-10 [&>*]:flex-1",children:[(0,n.jsxs)(Y.SP,{className:"h-8 w-full flex-1",disabled:!0!==t,value:"preview",children:[(0,n.jsx)(X.R,{}),(0,n.jsx)("span",{className:"select-none",children:"Preview"})]}),(0,n.jsxs)(Y.SP,{className:"h-8 flex-1",value:"code",children:[(0,n.jsx)(G.K,{}),(0,n.jsx)("span",{className:"select-none",children:"Code"})]})]})});return(0,n.jsx)("div",{className:(0,$.cn)("flex items-center gap-2",s&&"w-full"),children:s?a:null})}var q=r(23411),ee=r(29429),et=r(62511),er=r(24815);function en(e){let{resultId:t}=e,r=(0,er.N)("previewBlock"),s=(0,l.useCallback)(()=>{if(!t)return;let e=document.getElementById(J(t));if(e instanceof HTMLIFrameElement){if(e.contentDocument)e.contentDocument.location.reload();else if(e.srcdoc){let t=e.srcdoc;e.srcdoc="",setTimeout(()=>{e.srcdoc=t},10)}else e.src=e.src}},[t]);return(0,n.jsx)(b.O,{"aria-label":r("refresh"),onClick:()=>s(),tooltip:{side:"bottom",content:r("refresh")},children:(0,n.jsx)(et.w,{})})}function el(){var e;let{data:t,mutate:r}=(0,f.ZP)("result:full-screen"),{mutate:n}=(0,f.ZP)("state:select"),s=(0,l.useCallback)(e=>{r(t=>{if(!t&&!e)return;let r=new URL(window.location.href),l=new URLSearchParams(r.search);return l.get("b")&&(l.set("f",e?"1":"0"),r.search=l.toString(),window.history.replaceState({},"",r.toString())),n(!1),{value:e}})},[r,n]);return{fullScreenResult:null!==(e=null==t?void 0:t.value)&&void 0!==e&&e,setFullscreenResult:s,source:null==t?void 0:t.source}}var es=r(61472);function ea(){let{setFullscreenResult:e}=el(),t=(0,er.N)("previewBlock");return(0,n.jsx)(b.O,{"aria-label":t("fullscreen"),className:"hidden md:flex",onClick:()=>e(!0),tooltip:{side:"bottom",content:t("fullscreen")},children:(0,n.jsx)(es.i,{})})}var ei=r(68257),eo=r(76886);function ec(e){let{children:t}=e,{fullScreenResult:r,setFullscreenResult:l,source:s}=el(),a=(0,eo.y)(),o=(0,er.N)("fullScreenContainer"),c=r&&!a;(0,A.OR)("keydown",e=>{"Escape"===e.key&&l(!1)});let d=()=>l(!1),u=(0,n.jsxs)("div",{className:(0,i.cn)(c?"absolute inset-16":"size-full",c&&"ssr"!==s&&"animate-in zoom-in-90"),children:[c&&(0,n.jsx)(()=>(0,n.jsx)(j.z,{className:"absolute -top-12 right-0 size-9 text-2xl font-light",onClick:d,size:"sm",tooltip:{side:"left",content:o("close")},variant:"secondary",children:"\xd7"}),{}),(0,n.jsx)("div",{className:(0,i.cn)("bg-background size-full overflow-hidden",c&&"rounded-lg"),children:t})]}),v=(0,i.cn)(c?"bg-alpha-700 dark:bg-alpha-900 fixed inset-0 z-[60]":"h-full w-full",c&&"ssr"!==s&&"animate-in fade-in duration-300");return"ssr"===s?(0,n.jsx)("div",{className:v,onClick:d,children:u}):(0,n.jsx)(ei.E.div,{className:v,onClick:d,children:u})}var ed=r(25113),eu=r.n(ed),ev=r(992),ep=r(9923),em=r(97077),ef=r(15214);function ex(e){let{hasUnappliedChanges:t,blockId:r,source:s,onApply:a,showFadeOut:i}=e,[o,c]=(0,l.useState)(!1),[d,u]=(0,l.useState)(!1),v=(0,er.N)("unappliedChanges"),p=async()=>{c(!0);let e=await fetch("/chat/api/chat/remote/save",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bid:r,blockSource:s})});if(c(!1),e.ok){let t=await e.json();t.success?(u(!0),setTimeout(()=>u(!1),2e3),em.Am.success(v("savedChanges"))):(em.Am.error("Local: conflict detected. Check your console"),console.log(t)),a()}else em.Am.error(v("failedToApplyChanges"))};return(0,n.jsx)(ef.M,{children:t&&!d?(0,n.jsxs)(n.Fragment,{children:[i?(0,n.jsx)(ei.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-gradient-to-t to-transparent"},"unsaved-changes-bg"):null,(0,n.jsx)(ei.E.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:o?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-background absolute inset-x-0 bottom-3 z-20 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:o?(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,n.jsx)(y.$,{size:16}),"Saving"]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ep.v,{className:"!text-gray-500"}),"Unsaved Changes"]}),(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(j.z,{size:"sm",className:"h-7",rounded:!0,disabled:o,onClick:p,children:v("apply")})})]})},"unsaved-changes-island")]}):null})}let eh=(0,ev.default)(()=>r.e(2969).then(r.bind(r,92969)).then(e=>e.MultiFileLocalCodeBlock),{loadableGenerated:{webpack:()=>[92969]}}),eg=eu()((e,t)=>{if(e){var r;null===(r=e.contentWindow)||void 0===r||r.postMessage({type:"preview_code",code:t},"*")}},200);function eb(e){let{children:t,activeTab:r,setActiveTab:a,allowRefresh:i,resultId:o,language:c,diffInfo:d,remoteInfo:u,meta:v,source:p,hasBlockPreview:m,blockId:x,blockType:h,closed:g,hasSourceBeenEdited:b,onEdit:w}=e,j=(0,A.tm)(),{isPublished:N}=(0,T.I)(),[P,E]=(0,l.useState)(null),{isAuthor:k}=(0,C.RN)(),R=(0,er.N)("previewBlock"),{data:I,mutate:U}=(0,f.ZP)(x?["remote:accepted",x]:null,null,{fallbackData:null==u?void 0:u.accepted});if(N)return(0,n.jsx)("div",{className:(0,q.Z)("bg-muted h-full min-h-0 overflow-hidden","preview"===r&&"border-alpha-200",!j&&"opacity-0"),children:t});let _={key:"code",display:v.file,content:"local"===h?(0,n.jsx)(l.Suspense,{fallback:null,children:(0,n.jsx)(eh,{remoteInfo:u,source:p,closed:g,onEdit:e=>{g&&E(e)}})}):(0,n.jsx)(s.d,{allowQuoting:!0,caller:"v0",originalCode:g?void 0:null==d?void 0:d.originalCode,className:(0,q.Z)("not-prose flex-1 grow","preview"===r&&"sr-only invisible"),editable:g&&k,fileName:v.file,language:c,editValue:P,hasSourceBeenEdited:b,onEdit:e=>{if(!g)return;E(e),null==w||w(e);let t=J(null!=o?o:x),r=document.getElementById(t);if(r){if("v0"===h)eg(r,e);else{var n;null===(n=r.contentWindow)||void 0===n||n.postMessage({type:c.toUpperCase()+"_RENDER",source:e},r.dataset.origin||"")}}},runnable:!0,showLineNumbers:!0,value:p}),actions:(0,n.jsx)(O.G,{additionalHeaderActions:void 0,allowClose:!1,allowCopyCode:!0,allowDownloadCode:!0,caller:"v0",closeHandler:null,fileName:v.file,isTabbed:!0,value:P||p})},D={key:"preview",disabled:!0!==m,tooltip:"object"==typeof m?m.error:void 0,display:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(X.R,{className:"group-disabled:hidden"}),(0,n.jsx)("div",{className:"hidden group-disabled:block",children:g?(0,n.jsx)(ee._,{}):(0,n.jsx)(y.$,{size:16})}),R("preview")]}),content:(0,n.jsx)(ec,{children:t}),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ea,{}),i&&(0,n.jsx)(en,{resultId:o})]})};return(0,n.jsxs)(n.Fragment,{children:["local"===h?(0,n.jsx)(ex,{blockId:x,hasUnappliedChanges:!0!==I||null!==P&&P!==p,source:P||p,onApply:()=>{U(!0)},showFadeOut:"code"===r}):null,(0,n.jsx)(S.f,{activeTabKey:null!=r?r:"code",setActiveTabKey:a,tabFiles:[D,_]})]})}var ew=r(56500);let ej={LAYOUT_UNSUPPORTED:"v0 cannot currently preview Next.js layouts",SERVER_ACTION_UNSUPPORTED:"Server Actions cannot be previewed",RSC_UNSUPPORTED:"v0 cannot currently preview React Server Components",API_KEY_UNSUPPORTED:"v0 cannot currently preview components with API keys",REACT_NATIVE_UNSUPPORTED:"v0 cannot currently preview React Native components",EXPO_UNSUPPORTED:"v0 cannot currently preview Expo components",CLERK_UNSUPPORTED:"v0 does not currently support previewing Clerk",PRISMA_UNSUPPORTED:"v0 does not currently support previewing @prisma/client",NEXT_INTL_UNSUPPORTED:"v0 does not currently support previewing next-intl",NODEMAILER_UNSUPPORTED:"v0 does not currently support previewing nodemailer",INERTIA_UNSUPPORTED:"v0 does not currently support previewing Inertia.js",EXPRESS_UNSUPPORTED:"v0 does not currently support previewing Express.js",FS_NOT_SUPPORTED:"v0 does not currently support previews with file system access",REMIX_UNSUPPORTED:"v0 does not currently support previewing Remix",REACT_ROUTER_UNSUPPORTED:"v0 does not currently support previewing react-router",MONGODB_UNSUPPORTED:"v0 does not currently support previewing MongoDB",ROUTE_HANDLER_UNSUPPORTED:"v0 cannot preview Route Handlers",REACT_HOOKS:"React hooks cannot be previewed",NON_JS_TS_FILE_UNSUPPORTED:"v0 can not preview this file",TEST_FILES_UNSUPPORTED:"v0 does not currently support previewing tests",NODE_APIS:"v0 does not currently support previewing Node.js APIs",CHAKRA_UNSUPPORTED:"v0 does not currently support previewing Chakra UI",REACT_PDF_UNSUPPORTED:"v0 does not currently support previewing @react-pdf/renderer",SWIPER_UNSUPPORTED:"v0 does not currently support previewing swiper/css",GOOGLEAPIS_UNSUPPORTED:"v0 does not currently support previewing code using googleapis",ANGULAR_UNSUPPORTED:"v0 does not currently support previewing Angular",MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED:"v0 does not currently support previewing @mui/x-date-pickers/AdapterDateFns",PLAYWRIGHT_UNSUPPORTED:"v0 does not currently support previewing Playwright",INSTRUMENTATION_UNSUPPORTED:"v0 does not support previewing instrumentation.ts"},ey=[["@clerk/nextjs",ej.CLERK_UNSUPPORTED],["@clerk/clerk-react",ej.CLERK_UNSUPPORTED],["next-intl",ej.NEXT_INTL_UNSUPPORTED],["react-native",ej.REACT_NATIVE_UNSUPPORTED],["@prisma/client",ej.PRISMA_UNSUPPORTED],["pg",ej.PRISMA_UNSUPPORTED],["nodemailer",ej.NODEMAILER_UNSUPPORTED],["@sendgrid/mail",ej.NODEMAILER_UNSUPPORTED],["@inertiajs/react",ej.INERTIA_UNSUPPORTED],["@chakra-ui/react",ej.CHAKRA_UNSUPPORTED],["@react-pdf/renderer",ej.REACT_PDF_UNSUPPORTED],["swiper/css",ej.SWIPER_UNSUPPORTED],["swiper/css/navigation",ej.SWIPER_UNSUPPORTED],["@playwright/test",ej.PLAYWRIGHT_UNSUPPORTED],["angular/router",ej.ANGULAR_UNSUPPORTED],["@mui/x-date-pickers/AdapterDateFns",ej.MATERIAL_UI_ADAPTER_DATE_UNSUPPORTED],["@react-navigation/native",ej.EXPO_UNSUPPORTED],["@react-navigation/stack",ej.EXPO_UNSUPPORTED],["expo-router",ej.EXPO_UNSUPPORTED],["express",ej.EXPRESS_UNSUPPORTED],["expo-file-system",ej.EXPO_UNSUPPORTED],["googleapis",ej.GOOGLEAPIS_UNSUPPORTED],["fs",ej.FS_NOT_SUPPORTED],["fs/promises",ej.FS_NOT_SUPPORTED],["bcrypt",ej.NODE_APIS],["@remix-run/node",ej.REMIX_UNSUPPORTED],["mongodb",ej.MONGODB_UNSUPPORTED],["react-router-dom",ej.REACT_ROUTER_UNSUPPORTED]],eN=["GET","POST","PUT","PATCH","DELETE","HEAD","OPTIONS"],eP=["tsx","html","jsx","js","ts"];var eE=r(55238),ek=r(26183),eR=r(41455),eT=r(57211),eI=r(99706),eU=r(97563);function e_(e){let{iframeId:t,iframeRef:r,activeTab:l,isPublished:s,src:a,origin:i,onLoad:o}=e;return(0,n.jsx)("iframe",{allow:"fullscreen; camera; microphone; clipboard-write; autoplay",className:(0,q.Z)("h-full w-full select-none","preview"!==l&&(s?"hidden":"sr-only invisible")),"data-origin":i,"data-v0":!0,id:t,loading:"eager",onLoad:o,ref:r,sandbox:"allow-scripts allow-same-origin allow-forms allow-downloads allow-popups-to-escape-sandbox allow-pointer-lock allow-popups",src:"".concat(i).concat(a)})}var eS=r(95781);class eO{}function eA(e){let{error:t}=e,[r,s]=(0,l.useState)(!0),{setPromptFormInput:a}=(0,ek.R)(),{isAuthor:i}=(0,C.RN)(),o=(0,eI.OK)(),{isCopied:c,copyToClipboard:d}=(0,w.m)({timeout:2e3});return t&&r?(0,n.jsx)("div",{className:"light absolute bottom-0 left-0 z-10 max-w-[400px] p-4",children:(0,n.jsxs)("div",{className:"text-background flex min-w-[300px] flex-col items-center gap-3 rounded-[8px] bg-red-600 p-2 text-sm",role:"alert",children:[(0,n.jsxs)("div",{className:"flex w-full flex-col gap-1",children:[(0,n.jsxs)("div",{className:"flex w-full items-center justify-between font-semibold",children:[(0,n.jsx)("span",{children:"Error"})," ",(0,n.jsxs)(j.z,{className:"text text-background m-[-4px] hover:text-gray-200",onClick:()=>{s(!1)},size:"xs",variant:"ghost",children:[(0,n.jsx)(eT.U,{}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]}),(0,n.jsx)("div",{className:"flex w-full",children:(0,n.jsx)("span",{className:"font-small text-background line-clamp-3 overflow-hidden font-mono text-[11px]",children:t})})]}),i&&(0,n.jsxs)("div",{className:"flex w-full justify-end gap-2 align-middle",children:[(0,n.jsx)(j.z,{className:"border-background text-background bg-transparent px-1.5 py-0.5 hover:no-underline",onClick:()=>{d(t)},size:"sm",variant:"link",children:(0,n.jsx)(eS.$,{isCopied:c})}),(0,n.jsx)("div",{className:"border-alpha-400 border-l"}),(0,n.jsxs)(j.z,{className:"h-[24px] rounded-[6px] px-1.5 py-0.5 text-xs",onClick:()=>{a("The code returns the following error:\n```\n".concat(t,"\n```\nRevise the code to address the error.")),(0,eU.W7)()&&o(!1)},size:"sm",variant:"secondary",children:["Fix with ",(0,n.jsx)(eR.z,{className:"mt-[1px]"})]})]})]})}):null}eO.getIsPreviewable=e=>{let{source:t,closed:r,meta:n}=e,l=function(e,t){if(t){if(t.startsWith("use-"))return ej.REACT_HOOKS;if("instrumentation.ts"===t)return ej.INSTRUMENTATION_UNSUPPORTED;let e=t.split("."),r=e[e.length-1],n=e.length>2?e[e.length-2]:void 0;if(r&&!eP.some(e=>r===e))return ej.NON_JS_TS_FILE_UNSUPPORTED;if(n&&("test"===n||"spec"===n))return ej.TEST_FILES_UNSUPPORTED}for(let[t,r]of ey)if(new RegExp("from ['\"]".concat(t.replace("/","/"),"['\"]")).test(e))return r;return/\<ClerkProvider/.test(e)?ej.CLERK_UNSUPPORTED:/export default function (Root)?Layout/.test(e)?ej.LAYOUT_UNSUPPORTED:/(^|\n)['"]use server['"]/.test(e)?ej.SERVER_ACTION_UNSUPPORTED:/export default async function/.test(e)?ej.RSC_UNSUPPORTED:/(API_KEY|_SECRET) =/.test(e)||/YOUR_API_KEY/.test(e)?ej.API_KEY_UNSUPPORTED:!eN.some(t=>new RegExp("export (default )?async function ".concat(t,"\\(")).test(e)||new RegExp("export const ".concat(t," =")).test(e))||ej.ROUTE_HANDLER_UNSUPPORTED}(t,n.file);return"string"==typeof l?{error:l}:!!l&&r},eO.Render=l.memo(e=>{let t=(0,C.ql)(),{isPublished:r}=(0,T.I)(),{chatId:s}=(0,C.ae)(),{activeTab:a,setActiveTab:i,hasBlockPreview:o}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable}),{projectBlocks:c,projectBlockIndex:d,allBlocks:u}=(0,eE.useBlockHistory)({blockId:e.blockId}),v=(0,l.useMemo)(()=>{var e;let t={},r=(null===(e=c[d])||void 0===e?void 0:e.meta.file)||".";for(let e of u)e.resultId&&e.meta.file&&(t[e.meta.file]=e.resultId);for(let e=0;e<=d;e++){let r=c[e],n=r.meta.file;n&&r.resultId&&(t[n]=r.resultId)}return{mapping:t,rootFile:r}},[u,c,d]),p=(0,l.useRef)(null),[f,x]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(p.current)return function(e,t){let r=H.get(e)||Math.random().toString();return H.set(e,r),Z.push({id:r,listener:t}),()=>{let e=Z.findIndex(e=>e.listener===t);e>=0&&Z.splice(e,1)}}(p.current,t=>{switch(t.type){case"set_loading":p.current&&(V(p.current,{type:"parent_ready"}),V(p.current,{type:"sync_file_mapping",data:v}));break;case"error":case"runtime-error":{let r=function(e){return isNaN(parseInt(e))?e:"An unexpected error occurred (".concat(e,")")}(t.error);t.resultId===e.resultId&&x(n=>(n!==r&&(0,m.j)("V0BlockPreviewError",{blockId:e.blockId,resultId:t.resultId,from:void 0!==e.diffInfo?"quick-edit":void 0},{errorMsg:r,errorCode:k.bP}),r));break}case"started_visible_render":e.setIsPreviewable(!0)}})},[e.blockId,e.meta.from,e.diffInfo,e.resultId,e.setIsPreviewable,v,t]),(0,l.useEffect)(()=>{x(null)},[e.blockId]),(0,n.jsxs)(eb,{activeTab:a,allowRefresh:!0,hasBlockPreview:o,setActiveTab:i,...e,blockType:"v0",language:"typescriptreact",children:[f?(0,n.jsx)(eA,{error:f}):null,e.resultId&&!0===e.isPreviewable?(0,n.jsx)(e_,{activeTab:a,iframeId:J(e.resultId),iframeRef:p,isPublished:r,onLoad:()=>{p.current&&V(p.current,{type:"sync_file_mapping",data:v})},origin:W(s||e.blockId),src:"/p/".concat(e.resultId,"?c=1&flags=1&bid=").concat(e.blockId)}):null]})}),eO.Actions=l.memo(e=>{let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(Q,{hasBlockPreview:t,activeTab:r,setActiveTab:l})})});class eC{static Actions(){return null}}eC.getIsPreviewable=()=>!1,eC.Render=l.memo(e=>(0,n.jsx)(eb,{activeTab:"code",hasBlockPreview:!1,hidePreviewPane:!0,setActiveTab:()=>{},...e,closed:!0,blockType:"code",resultId:void 0}));var eD=r(55807);function ez(e,t,r){let[n,s]=(0,l.useState)(!1),a=(0,eD.d)(n),i=(0,eD.d)(t);(0,l.useEffect)(()=>{let t=document.getElementById(r),n=r=>{if(r.origin===t.dataset.origin&&r.data.type===e+"_READY"&&(s(!0),i.current)){var n;null===(n=t.contentWindow)||void 0===n||n.postMessage({type:e+"_RENDER",source:i.current},t.dataset.origin||"")}};return window.addEventListener("message",n),()=>{window.removeEventListener("message",n)}},[e,r,i]),(0,l.useEffect)(()=>{let n=document.getElementById(r);if(n){var l,s;a.current?null===(l=n.contentWindow)||void 0===l||l.postMessage({type:e+"_RENDER",source:t},n.dataset.origin||""):null===(s=n.contentWindow)||void 0===s||s.postMessage({type:e+"_PING"},n.dataset.origin||"")}},[t,e,r,a])}let eL="html",eB=RegExp("<!DOCTYPE html>.*?<\\/html>","s");class eM{static Render(e){let{isPublished:t}=(0,T.I)(),{chatId:r}=(0,C.ae)(),{activeTab:l,setActiveTab:s,hasBlockPreview:a}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=J(eL);return ez("HTML",e.source,i),(0,n.jsx)(eb,{activeTab:l,hasBlockPreview:a,setActiveTab:s,...e,blockType:"html",language:"html",resultId:eL,children:(0,n.jsx)(e_,{activeTab:l,iframeId:i,isPublished:t,origin:W(r||e.blockId),src:"/render/html"})})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,n.jsx)(Q,{hasBlockPreview:t,activeTab:r,setActiveTab:l})}}eM.getIsPreviewable=e=>{let{source:t,closed:r}=e;return r||eB.test(t)};var eH=r(62558),eW=r(67365);class eF{static Render(e){let{isPublished:t}=(0,T.I)(),{activeTab:r,setActiveTab:s,hasBlockPreview:a}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable}),[o,c]=(0,l.useState)(void 0),d=e.source.replaceAll(/\\+`/g,"`");return(0,n.jsx)(eb,{activeTab:r,hasBlockPreview:a,setActiveTab:s,...e,blockType:"markdown",language:"markdown",resultId:"markdown",source:d,onEdit:c,children:(0,n.jsx)("div",{className:(0,i.cn)("flex h-full w-full justify-center overflow-y-auto p-4 md:py-6","preview"!==r&&(t?"hidden":"sr-only invisible")),children:(0,n.jsx)(eH.M,{children:(0,n.jsx)(eW.o,{children:void 0===o?d:o})})})})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,n.jsx)(Q,{hasBlockPreview:t,activeTab:r,setActiveTab:l})}}eF.getIsPreviewable=()=>!0;class eV{static Render(e){let{chatId:t}=(0,C.ae)(),{isPublished:r}=(0,T.I)(),{activeTab:l,setActiveTab:s,hasBlockPreview:a}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=J(e.blockId);return ez("VUE",e.source,i),(0,n.jsx)(eb,{activeTab:l,allowRefresh:!0,hasBlockPreview:a,setActiveTab:s,...e,blockType:"vue",language:"vue",resultId:e.blockId,children:(0,n.jsx)(e_,{activeTab:l,iframeId:i,isPublished:r,origin:W(t||e.blockId),src:"/render/vue"},i)})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,n.jsx)(Q,{hasBlockPreview:t,activeTab:r,setActiveTab:l})}}eV.getIsPreviewable=e=>{let{closed:t}=e;return t};class eK{static Render(e){let{chatId:t}=(0,C.ae)(),{isPublished:r}=(0,T.I)(),{activeTab:l,setActiveTab:s,hasBlockPreview:a}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable}),i=J(e.blockId);return ez("SVELTE",e.source,i),(0,n.jsx)(eb,{activeTab:l,hasBlockPreview:a,setActiveTab:s,...e,blockType:"svelte",language:"svelte",resultId:e.blockId,children:(0,n.jsx)(e_,{activeTab:l,iframeId:i,isPublished:r,origin:W(t||e.blockId),src:"/render/svelte"},i)})}static Actions(e){let{hasBlockPreview:t,activeTab:r,setActiveTab:l}=(0,ew.v)({blockId:e.blockId,isPreviewable:e.isPreviewable});return(0,n.jsx)(Q,{hasBlockPreview:t,activeTab:r,setActiveTab:l})}}eK.getIsPreviewable=e=>{let{closed:t}=e;return t};var eZ=r(55811);function eY(e){let{iframeId:t,children:r}=e,[s,a]=l.useState("");return(0,l.useEffect)(()=>{if(!document.getElementById(t))return;let e=e=>{e.data&&"__v0_remote__"in e.data&&"location_change"===e.data.type&&a(e.data.href)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t]),(0,n.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center border-b p-2 bg-gray-100",children:[(0,n.jsx)(j.z,{variant:"ghost",size:"sm",className:"rounded-full",children:(0,n.jsx)(eZ.s,{size:15})}),(0,n.jsx)(j.z,{variant:"ghost",size:"sm",className:"rounded-full",children:(0,n.jsx)(o._,{size:15})}),(0,n.jsx)(j.z,{variant:"ghost",size:"sm",className:"rounded-full",children:(0,n.jsx)(et.w,{size:15})}),(0,n.jsx)("input",{type:"text",className:"w-full ml-2 h-8 px-2 outline-none border rounded-md",value:s})]}),(0,n.jsx)("div",{className:"flex-1 flex-shrink-0",children:r})]})}class eG{static Render(e){let{source:t,blockId:r,remoteInfo:s,closed:a}=e,{chatId:i}=(0,C.ae)(),o=J("remote-preview"),{data:c}=(0,f.ZP)(r?["remote:preview",r]:null,null,{fallbackData:(null==s?void 0:s.accepted)||!1}),{activeTab:d,setActiveTab:u}=(0,ew.v)({blockId:e.blockId,isPreviewable:a});return(0,l.useEffect)(()=>{if(!a||!(r||i))return;let e=new AbortController,t=async()=>{try{await fetch("/chat/api/chat/remote/preview?".concat("@remote"===r?"cid=".concat(i):"bid=".concat(r)),{signal:e.signal})}catch(e){}};return setTimeout(()=>{t()},0),()=>{e.abort()}},[a,i,r]),(0,n.jsx)(eb,{activeTab:"@remote"===r?"preview":d,setActiveTab:u,...e,meta:"@remote"===r?{...e.meta}:{...e.meta,file:"Files"},allowRefresh:!0,language:"plaintext",blockType:"local",resultId:"remote-preview",remoteInfo:s,source:t,hasBlockPreview:!!c||e.closed,children:a||"@remote"===r?(0,n.jsx)(eY,{iframeId:o,children:(0,n.jsx)(e_,{activeTab:"@remote"===r?"preview":d,iframeId:o,isPublished:!1,origin:"",src:"/chat/api/chat/remote/proxy?cid=".concat(i)},o)}):null})}static Actions(e){let{blockId:t,isPreviewable:r}=e,{hasBlockPreview:l,activeTab:s,setActiveTab:a}=(0,ew.v)({blockId:t,isPreviewable:r});return"@remote"===t?null:(0,n.jsx)(Q,{hasBlockPreview:l,activeTab:s,setActiveTab:a})}}function eX(e){let{block:t,initialSize:r,location:s="header"}=e,{isPublished:a}=(0,T.I)(),i=t?function(e){switch(e){case"node.js":case"nodejs":case"python":return z;case"markdown":return eF;case"html":return eM;case"v0":case"react":case"tsx":return eO;case"vue":return eV;case"svelte":return eK;case"code":return eC;case"local":return eG}}(t.type):null,o=!!i&&!!t&&i.getIsPreviewable({source:t.source,closed:t.closed,meta:t.meta}),[c,d]=(0,l.useState)(),u=c||o;return((0,l.useEffect)(()=>{d(void 0)},[null==t?void 0:t.id]),t&&i)?{action:a&&"footer"!==s?null:(0,n.jsx)(i.Actions,{blockId:t.id,isPreviewable:u}),content:(0,n.jsx)(i.Render,{resultId:t.resultId,blockId:t.id,closed:t.closed,initialOutputSize:r,language:t.language,meta:t.meta,source:t.source,diffInfo:t.diffInfo,remoteInfo:t.remoteInfo,isPreviewable:u,setIsPreviewable:d,hasSourceBeenEdited:t.hasSourceBeenEdited})}:{action:null,content:null}}function e$(e){let{block:t,initialSize:r}=e,{content:n}=eX({block:t,initialSize:r,location:void 0});return n}eG.getIsPreviewable=e=>{let{closed:t}=e;return t}},45550:(e,t,r)=>{function n(e){if("user"===e.role)return!e.content&&(!e.attachments||0===e.attachments.length);let t=0===e.content.length,r=1===e.content.length&&1===e.content[0][0],n=e.content.length>0&&0===e.content[0][0]&&0===e.content[0][1].length;return t||r||n}function l(e){return"user"===e.role&&!e.content&&e.attachments&&e.attachments.length>0}function s(e){return"user"===e.role&&e.content&&e.content.startsWith("<v0_local_project_task>")}function a(e){return"user"===e.role&&e.content&&e.content.startsWith("<user_action ")}r.d(t,{PR:()=>s,fT:()=>l,hm:()=>a,ib:()=>n})},56267:(e,t,r)=>{r.d(t,{c:()=>n});let n=e=>"user"===e.role?e.id:e.continuingMessageId||e.id},56500:(e,t,r)=>{r.d(t,{T:()=>a,v:()=>s});var n=r(79995),l=r(86032);function s(e){let{blockId:t,isPreviewable:r}=e,s=!0===r,{data:a,mutate:i}=(0,l.ZP)(["block:activeTab",t],{fallbackData:s?"preview":"code"});return(0,n.useEffect)(()=>{s&&i("preview")},[s,i]),{hasBlockPreview:r,activeTab:a,setActiveTab:i}}let a=e=>{let{data:t}=(0,l.ZP)(["block:activeTab",e]);return t}}}]);