"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4806],{84806:(e,t,a)=>{a.d(t,{ChatActions:()=>V,w:()=>H});var s=a(69160),l=a(79995),i=a(18396),n=a(59700),r=a(55347),c=a(10556),d=a(64424),o=a(39685),h=a(33166),u=a(52236),x=a(42213),p=a(97563),m=a(76665),f=a(68030);let j={hover:{opacity:1,y:[0,2,0],transition:{...m.Ve,y:{...m.Ve,duration:1.1,repeat:Number.POSITIVE_INFINITY}}}},v=e=>({opacity:[0,1],y:[16,0],scaleX:1,scaleY:1,interruptible:!1,transition:{ease:[.13,.65,.14,1],duration:.25,delay:e}});function b(){return(0,s.jsxs)(m.Iw,{hideOverflow:!0,children:[(0,s.jsx)(m.YM,{variants:{...j,idle:{opacity:0},tap:{opacity:0,y:-16,interruptible:!1,transition:{ease:[.33,.03,.94,.42],duration:.5}}},children:(0,s.jsx)(g,{})}),(0,s.jsx)(m.YM,{variants:{...j,idle:{opacity:1},tap:v(.4)},children:(0,s.jsx)(y,{})}),(0,s.jsx)(m.YM,{variants:{hover:{opacity:0,y:4,scaleX:0,scaleY:.5,transition:m.Ve},idle:{opacity:1,scaleX:1,scaleY:1},tap:v(.47)},children:(0,s.jsx)(C,{})})]})}let g=(0,f.l)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V13.5H8.75011V3.56062Z" fill="currentColor"/>'),y=(0,f.l)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8.75011 3.56062L11.2501 6.06062L12.3108 4.99996L8.70722 1.39641C8.3167 1.00588 7.68353 1.00588 7.29301 1.39641L3.68945 4.99996L4.75011 6.06062L7.25011 3.56062V11H8.75011V3.56062Z" fill="currentColor"/>'),C=(0,f.l)('<path clip-rule="evenodd" d="M13.5 13.5L13.5 8.5L15 8.5L15 14C15 14.5523 14.5523 15 14 15L2 15C1.44771 15 1 14.5523 1 14L1 8.5L2.5 8.5L2.5 13.5L13.5 13.5Z" fill="currentColor" fill-rule="evenodd"/>');var w=a(22866),N=a(81623),I=a(38322),k=a(74326),D=a(24815),S=a(9509);let T=(0,S.$)("53dfa2c39121097f9552f1cf0c79660e281f371a"),z=(0,S.$)("ebe110662c9fa42f597a5196d4721328fab80af4");var M=a(97077),A=a(80685),L=a(14905),F=a(88375),O=a(76339),P=a(98985);function V(e){let{chat:t,onOpenChange:a,open:u,className:x,side:m="bottom",setChatHistoryData:f,disabled:j,...v}=e,g=(0,p.dD)(),{user:y}=(0,F.a)(),{setShareDialog:C}=(0,w.s)(),{setUpdateChatTitleDialogForChatId:S}=(0,N.o)(),{setDeleteDialogForChatId:T}=(0,I.$)(),{setMobileSheetOpen:z}=(0,k.G)(),{activeScope:A}=(0,P.PK)(),L=(0,D.N)("chatActions"),V=t.authorId===(null==y?void 0:y.id),$=(0,l.useMemo)(()=>!!(A&&"membership"in A&&"OWNER"===A.membership.role),[A]),E=V||$,{copyToClipboard:R}=(0,O.m)({timeout:2e3});return(0,s.jsxs)(r.h_,{onOpenChange:a,open:u,children:[(0,s.jsx)(r.$F,{asChild:!0,disabled:j,children:(0,s.jsxs)(i.z,{className:(0,n.cn)("relative z-10 size-7 shrink-0 rounded-md p-0 transition-none has-[>svg]:p-0 ",x),"cmdk-item-actions":"",size:"sm",variant:"ghost",...v,children:[(0,s.jsx)("span",{"aria-hidden":!0,children:(0,s.jsx)(d.y,{})}),(0,s.jsx)("span",{className:"sr-only",children:"Open chat actions"})]})}),(0,s.jsx)(r.AW,{align:g?"end":"right"===m?"start":"end",className:"w-[235px]",side:g?"bottom":m,sideOffset:8,children:(0,s.jsxs)(r.Qk,{children:[(0,s.jsxs)(r.Xi,{onSelect:()=>{if(z(!1),E){var e;C({chatId:t.chatId,privacy:null!==(e=t.privacy)&&void 0!==e?e:"private"})}else R(window.location.href),M.Am.success("Share link copied!")},children:[(0,s.jsx)("span",{"aria-hidden":!0,children:(0,s.jsx)(b,{})}),L("share")]}),V&&(0,s.jsxs)(r.Xi,{onSelect:()=>{z(!1),(0,c.j)("RenameChat",{targetChatId:t.chatId}),S(t.chatId)},children:[(0,s.jsx)("span",{"aria-hidden":!0,children:(0,s.jsx)(h.E,{})}),L("rename")]}),V?(0,s.jsx)(H,{chat:t,setChatHistoryData:f}):null,V&&(0,s.jsxs)(r.Xi,{onSelect:()=>{z(!1),T(t.chatId)},variant:"destructive",children:[(0,s.jsx)("span",{"aria-hidden":!0,children:(0,s.jsx)(o.r,{})}),L("delete")]})]})})]})}function $(e){let{setChatHistoryData:t,setChatFavoritesData:a,chat:i}=e,n=(0,D.N)("chatActions"),d=(0,L.usePathname)(),o=(0,L.useRouter)(),[h,p]=(0,l.useTransition)(),[m,f]=(0,l.useOptimistic)(i.favorite);return(0,s.jsxs)(r.Xi,{disabled:h,onSelect:e=>{let s={error:null,success:null};f(e=>!e),p(async()=>{i.favorite?((0,c.j)("UnfavoriteChat",{targetChatId:i.chatId}),s=await T(i.chatId)):((0,c.j)("FavoriteChat",{targetChatId:i.chatId}),s=await z(i.chatId)),i.favorite?(t(e=>{let t=e.findIndex(e=>e.updatedAt&&i.updatedAt&&e.updatedAt<i.updatedAt);return t<0?[...e,i]:[...e.slice(0,t),i,...e.slice(t)]}),a(e=>e.filter(e=>e.chatId!==i.chatId))):(t(e=>e.filter(e=>e.chatId!==i.chatId)),a(e=>{let t=e.findIndex(e=>e.updatedAt&&i.updatedAt&&e.updatedAt<i.updatedAt);return t<0?[...e,i]:[...e.slice(0,t),i,...e.slice(t)]})),s.error?(f(i.favorite),M.Am.error(i.favorite?n("failedToUnfavorite"):n("failedToFavorite"))):"/chat/history"===d&&o.refresh()})},children:[(0,s.jsx)("span",{"aria-hidden":!0,className:"[[data-wide=true]_&]:mr-2 [[data-wide=true]_&]:h-4 [[data-wide=true]_&]:w-4 [[data-wide=true]_&]:text-gray-500",children:m?(0,s.jsx)("span",{className:"text-amber-600 ",children:(0,s.jsx)(x.v,{})}):(0,s.jsx)(u.U,{})}),m?n("unfavorite"):n("favorite")]})}function E(e){let{...t}=e,{setData:a}=(0,A.v)(),{setData:l}=(0,A.I)();return(0,s.jsx)($,{...t,setChatHistoryData:a,setChatFavoritesData:l})}function H(e){let{...t}=e;return t.setChatHistoryData&&t.setChatFavoritesData?(0,s.jsx)($,{...t,setChatHistoryData:t.setChatHistoryData,setChatFavoritesData:t.setChatFavoritesData}):(0,s.jsx)(E,{...t})}},82137:(e,t,a)=>{a.d(t,{P:()=>x,j:()=>u});var s=a(69160),l=a(36762),i=a(4729),n=a(93494),r=a(67470),c=a(24815),d=a(91303),o=a(22866),h=a(65317);let u={private:{babyIcon:(0,s.jsx)(n.H,{size:14}),icon:(0,s.jsx)(r.T,{})},team:{babyIcon:(0,s.jsx)(i.Q,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(i.Q,{})},"team-edit":{babyIcon:(0,s.jsx)(i.Q,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(i.Q,{}),visibleInPicker:!1},public:{babyIcon:(0,s.jsx)(l.T,{className:"p-[3px]",size:16}),icon:(0,s.jsx)(l.T,{})}};function x(e){let{chatId:t,privacy:a}=e,l=(0,c.N)("chatPrivacy"),{setShareDialog:i}=(0,o.s)();return a&&t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.C,{className:"pointer-events-auto hidden gap-0 text-[11px] sm:flex",onClick:()=>i({chatId:t,privacy:a}),size:"sm",variant:"outline",children:[u[a].babyIcon,(0,s.jsx)("p",{children:l("label",a)})]}),(0,s.jsx)(h.Tooltip,{content:l("label",a),children:(0,s.jsx)("button",{className:"flex sm:hidden",onClick:()=>i({chatId:t,privacy:a}),children:u[a].icon})})]}):null}},38322:(e,t,a)=>{a.d(t,{$:()=>v,DeleteChatDialog:()=>b});var s=a(69160),l=a(18396),i=a(97077),n=a(45490),r=a(74693),c=a(86032),d=a(79995),o=a(14905),h=a(80685),u=a(10556),x=a(50941),p=a(74326),m=a(32832),f=a(24815),j=a(76421);function v(){let{data:e,mutate:t}=(0,c.ZP)("showDeleteDialogForChatId",null);return{showDeleteDialogForChatId:e,setDeleteDialogForChatId:t}}function b(){let{showDeleteDialogForChatId:e,setDeleteDialogForChatId:t}=v(),a=(0,o.useRouter)(),c=(0,m.UG)(),[b,g]=(0,d.useTransition)(),{setData:y}=(0,h.v)(),{setMobileSheetOpen:C}=(0,p.G)(),w=(0,f.N)("deleteChatDialog");return(0,s.jsxs)(r.Modal,{onOpenChange:e=>{e||t(void 0)},open:void 0!==e,children:[(0,s.jsxs)(r.ModalHeader,{children:[(0,s.jsx)(r.ModalTitle,{children:w("title")}),(0,s.jsx)(r.ModalDescription,{children:w("description")})]}),(0,s.jsxs)(r.ModalFooter,{children:[(0,s.jsx)(r.ModalClose,{asChild:!0,children:(0,s.jsx)(l.z,{size:"sm",variant:"secondary",children:w("cancel")})}),(0,s.jsx)(l.z,{disabled:b,onClick:()=>{e&&g(async()=>{try{(0,u.j)("ClickDeleteChat",{targetChatId:e}),await (0,x.G)({payload:{chatId:e}}),y(t=>t.filter(t=>t.chatId!==e)),t(void 0),i.Am.success(w("successToast")),c.id!==e&&c.id||(C(!1),a.push("/chat"))}catch(e){(0,n.X)(e)||i.Am.error("Something went wrong. Please try again.")}})},size:"sm",variant:"destructive",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.v,{className:"size-4"}),w("deleting")]}):w("delete")})]})]})}},22866:(e,t,a)=>{a.d(t,{T:()=>D,default:()=>S,s:()=>k});var s=a(69160),l=a(86032),i=a(18396),n=a(20419),r=a(97077),c=a(76339),d=a(76811),o=a(74693),h=a(95781),u=a(83507),x=a(55929),p=a(24815),m=a(79995),f=a(80685),j=a(10556);let v=(0,a(9509).$)("9633c9e345d4dc4fc12f3ebc3fa549a9e19f5105");var b=a(70934),g=a(82137),y=a(98985),C=a(59700),w=a(31312),N=a(66694);function I(e){let{privacy:t,chatId:a}=e,{isTeam:l,activeScope:i}=(0,y.PK)(),[c,o]=(0,m.useTransition)(),{chatId:h}=(0,n.ae)(),{setChatPrivacy:u}=(0,d.b)(),{revalidate:x}=(0,f.v)(),{setShareDialog:I,showShareDialog:D}=k(),{ownerId:S}=(0,d.xN)(),[T,z]=(0,m.useState)(!1),M=(0,p.N)("chatPrivacy"),A=!S||S===(null==i?void 0:i.id),L=(0,m.useCallback)(e=>{a===h&&u(e),"object"==typeof D&&I({chatId:a,privacy:e})},[a,h,D,u,I]),F=(0,m.useCallback)(e=>{!c&&a&&e!==t&&(L(e),("public"===e||"team"===e)&&(0,j.j)("ShareChat",{targetChatId:a,team:"team"===e}),o(async()=>{let s=await v({chatId:a,privacy:e});x(),"error"in s?((0,b.R)(Error(s.error))||r.Am.error("Failed to update chat privacy"),L(null!=t?t:"private")):r.Am.success("Chat privacy updated")}))},[c,a,t,L,x]),O=A&&("team"===t||"team-edit"===t);return(0,s.jsxs)("div",{className:"flex w-full justify-between gap-2",children:[(0,s.jsxs)(w.Ph,{disabled:c,value:t,onValueChange:e=>F(e),open:T,onOpenChange:z,children:[(0,s.jsx)(w.i4,{className:"w-full rounded-lg border border-gray-200 p-3 text-left",children:(0,s.jsx)(w.ki,{placeholder:"Select privacy setting",className:"flex w-full flex-row justify-between",children:t&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-500",children:g.j[t].icon}),(0,s.jsx)("span",{children:M("title",t)})]})})}),(0,s.jsx)(w.Bw,{className:"w-full min-w-[490px] rounded-lg border border-gray-200 shadow-lg",children:Object.keys(g.j).map(e=>{if((!l||!A)&&("team"===e||"team-edit"===e))return null;let a=g.j[e];return!1===a.visibleInPicker?null:(0,s.jsx)(w.Ql,{value:e,className:(0,C.cn)("flex cursor-pointer items-center justify-between p-3 hover:bg-gray-100",t===e&&"bg-gray-100"),onSelect:e=>e.preventDefault(),iconOnRight:!0,icon:c?(0,s.jsx)(N.$,{}):void 0,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500",children:a.icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:M("title",e)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:M("description",e)})]})]})},e)})})]}),O&&A&&(0,s.jsxs)(w.Ph,{disabled:c,value:t,onValueChange:e=>F(e),children:[(0,s.jsx)(w.i4,{className:"max-w-[120px] rounded-lg border border-gray-200 p-3 text-left text-sm",children:(0,s.jsx)(w.ki,{placeholder:"Select privacy setting",children:(0,s.jsx)("span",{children:M("teamSecondaryOptions",t)})})}),(0,s.jsx)(w.Bw,{className:"w-[350px] rounded-lg border border-gray-200 shadow-lg",children:["team","team-edit"].map(e=>(0,s.jsx)(w.Ql,{value:e,className:(0,C.cn)("flex cursor-pointer items-center justify-between p-3 hover:bg-gray-100",t===e&&"bg-gray-100"),iconOnRight:!0,icon:c?(0,s.jsx)(N.$,{}):void 0,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-gray-500",children:g.j[e].icon}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium",children:M("teamSecondaryOptions",e)}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:M("teamSecondaryDescription",e)})]})]})},e))})]})]})}function k(){let{data:e,mutate:t}=(0,l.ZP)("showShareDialog",null,{fallbackData:!1});return{showShareDialog:e,setShareDialog:t}}function D(e){let{isAuthor:t,...a}=e,{setShareDialog:l}=k(),{chatPrivacy:n}=(0,d.b)(),{copyToClipboard:o}=(0,c.m)({timeout:2e3}),h=(0,p.N)("shareDialog");return"private"!==n||t?(0,s.jsxs)(i.z,{onClick:()=>{t?l(!0):("public"===n||"team"===n)&&(o(window.location.href),r.Am.success("Share link copied!"))},size:"sm",tooltip:{side:"bottom",content:h("share")},variant:"ghost",...a,children:[(0,s.jsx)(x.m,{}),(0,s.jsx)("span",{className:"sr-only",children:h("share")})]}):null}function S(){let e=(0,p.N)("shareDialog"),{chatId:t}=(0,n.ae)(),{chatPrivacy:a}=(0,d.b)(),{showShareDialog:l,setShareDialog:r}=k(),{isCopied:x,copyToClipboard:m}=(0,c.m)({timeout:2e3}),{chatId:f,privacy:j}="object"==typeof l?l:{chatId:t,privacy:a};return f?(0,s.jsxs)(o.Modal,{onOpenAutoFocus:e=>{e.preventDefault();let t=document.querySelector(".privacy-picker-selected");t&&t.focus()},onOpenChange:e=>{e||r(!1)},open:!!l,children:[(0,s.jsx)(o.ModalHeader,{children:(0,s.jsx)(o.ModalTitle,{children:e("title")})}),(0,s.jsx)(o.ModalContent,{className:"p-6",children:(0,s.jsx)(I,{privacy:j,chatId:f})}),(0,s.jsxs)(o.ModalFooter,{className:"bg-muted border-alpha-400 border-t !p-4",children:[(0,s.jsxs)(i.z,{onClick:()=>{m("".concat(window.location.origin,"/chat/").concat(f))},size:"sm",variant:"secondary",children:[(0,s.jsx)(h.$,{customIcon:(0,s.jsx)(u.r,{}),isCopied:x}),e("copyLink")]}),(0,s.jsx)(o.ModalClose,{asChild:!0,children:(0,s.jsx)(i.z,{tabIndex:0,size:"sm",children:e("done")})})]})]}):null}},74326:(e,t,a)=>{a.d(t,{ChatSidebarProvider:()=>d,G:()=>o});var s=a(69160),l=a(79995),i=a(51153),n=a(38322),r=a(22866);let c=(0,l.createContext)({isCollapsed:!1,setCollapsed:()=>{},mobileSheetOpen:!1,setMobileSheetOpen:()=>{},actionChatId:null});function d(e){let{isSidebarCollapsedInitial:t,children:a}=e,[d,o]=(0,l.useState)(!1),[h,u]=(0,l.useState)(t||!1),x=(0,l.useCallback)(e=>{u(e),document.cookie="".concat(i.V,"=").concat(!0===e?"true":"false","; path=/; max-age=").concat(604800)},[]),{showDeleteDialogForChatId:p}=(0,n.$)(),{showShareDialog:m}=(0,r.s)();return(0,s.jsx)(c.Provider,{value:{isCollapsed:h,setCollapsed:x,mobileSheetOpen:d,setMobileSheetOpen:o,actionChatId:p||("object"==typeof m?m.chatId:null)},children:a})}let o=()=>(0,l.useContext)(c)},76421:(e,t,a)=>{a.d(t,{v:()=>i});var s=a(69160),l=a(59700);function i(e){let{className:t,...a}=e;return(0,s.jsx)("svg",{className:(0,l.cn)("h-4 w-4 animate-spin",t),fill:"currentColor",viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",...a,children:(0,s.jsx)("path",{d:"M232 128a104 104 0 0 1-208 0c0-41 23.81-78.36 60.66-95.27a8 8 0 0 1 6.68 14.54C60.15 61.59 40 93.27 40 128a88 88 0 0 0 176 0c0-34.73-20.15-66.41-51.34-80.73a8 8 0 0 1 6.68-14.54C208.19 49.64 232 87 232 128Z"})})}},85061:(e,t,a)=>{a.d(t,{l:()=>i});var s=a(69160),l=a(59700);function i(e){let{count:t,max:a,className:i,displayThreshold:n,alertThreshold:r,message:c,messageThreshold:d,...o}=e;return n=null!=n?n:.75*a,d=null!=d?d:.9*a,r=null!=r?r:.95*a,(0,s.jsxs)("div",{className:(0,l.cn)("pointer-events-none items-center gap-2 rounded-md px-2 py-1 text-xs",t>=n?"flex":"hidden",t>=r?"text-red-500":"text-gray-500",i),...o,children:[c&&t>=d&&(0,s.jsx)("span",{children:c}),(0,s.jsxs)("span",{className:"ml-auto tabular-nums",children:[t.toLocaleString(),"/",a.toLocaleString()]})]})}},36645:(e,t,a)=>{a.d(t,{I:()=>r});var s=a(69160),l=a(79995),i=a(59700);let n=(0,a(39181).j)("focus-visible:border-alpha-600 disabled:border-alpha-300 inline-flex w-full shrink-0 rounded-lg border bg-background px-3 py-1 text-sm outline-none transition-all file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-400 disabled:pointer-events-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-400 disabled:ring-0",{variants:{size:{xs:"h-6",sm:"h-8",md:"h-10",lg:"h-12"}},defaultVariants:{size:"md"}}),r=l.forwardRef((e,t)=>{let{className:a,size:l,...r}=e;return r.suffix?(0,s.jsxs)("div",{className:"w-full flex text-sm rounded-lg border items-center justify-between focus-within:border-alpha-600",children:[(0,s.jsx)("input",{className:(0,i.cn)(n({size:l,className:a}),"flex-1 rounded-none rounded-l-lg focus-visible:none border-none"),ref:t,...r}),r.suffix]}):(0,s.jsx)("input",{className:(0,i.cn)(n({size:l,className:a})),ref:t,...r})});r.displayName="Input"},81623:(e,t,a)=>{a.d(t,{UpdateChatTitleDialog:()=>w,o:()=>C});var s=a(69160),l=a(79995),i=a(18396),n=a(74693);let r=(0,a(9509).$)("4ff5d952c441f4d1278f296c059fc40aeabf5875");var c=a(76811),d=a(14905),o=a(97077),h=a(36645),u=a(86032),x=a(76421),p=a(74326),m=a(80685),f=a(70934),j=a(80679),v=a(82226),b=a(85061),g=a(24815);let y=v.z.object({title:v.z.string().min(1,"Title is required").max(100,"Title must be less than 100 characters")});function C(){let{data:e,mutate:t}=(0,u.ZP)("showUpdateChatTitleDialogForChatId",null);return{showUpdateChatTitleDialogForChatId:e,setUpdateChatTitleDialogForChatId:t}}function w(){let{showUpdateChatTitleDialogForChatId:e,setUpdateChatTitleDialogForChatId:t}=C(),a=(0,d.useRouter)(),[u,v]=(0,l.useTransition)(),{title:w,setMetadata:N}=(0,c.xN)(),[I,k]=(0,l.useState)(""),D=(0,d.useParams)(),{setMobileSheetOpen:S}=(0,p.G)(),{data:T}=(0,m.v)(),[z,M]=(0,l.useState)(""),A=D.id,L=l.useRef(null),F=(0,g.N)("updateChatTitleDialog");(0,l.useEffect)(()=>{t(null)},[t]),(0,l.useEffect)(()=>{if(e){let t=null==T?void 0:T.find(t=>t.chatId===e);M((null==t?void 0:t.title)||w||""),k((null==t?void 0:t.title)||w||"")}},[e,T,w]),(0,l.useEffect)(()=>{e&&setTimeout(()=>{var e,t;null===(e=L.current)||void 0===e||e.focus(),null===(t=L.current)||void 0===t||t.select()},0)},[e]);let O=(0,l.useCallback)(()=>{e&&v(async()=>{try{let s=await r({chatId:e,title:I.trim()||"Untitled"});if("success"in s)A===e&&await N({title:I.trim()||"Untitled"}),a.refresh(),o.Am.success(F("successToast")),A!==e&&A||S(!1),t(null);else throw Error(j.GA)}catch(e){(0,f.R)(e,a)||o.Am.error("Failed to update chat title. Please try again.")}})},[e,I,a,N,t,A,S]),P=(0,l.useCallback)(()=>{t(null)},[t]),V=(0,l.useCallback)(e=>{e.preventDefault();let t=y.safeParse({title:I});if(!t.success){var a;let e=t.error.flatten().fieldErrors;o.Am.error((null===(a=e.title)||void 0===a?void 0:a[0])||"Invalid title");return}O()},[O,I]);return(0,s.jsx)(n.Modal,{onOpenChange:e=>{e||t(null)},open:null!==e,children:(0,s.jsxs)("form",{onSubmit:V,children:[(0,s.jsxs)(n.ModalHeader,{children:[(0,s.jsx)(n.ModalTitle,{children:F("title")}),(0,s.jsxs)(n.ModalDescription,{children:[(0,s.jsx)("label",{className:"sr-only",htmlFor:"newChatTitle",children:F("newChatTitle")}),(0,s.jsx)(h.I,{"aria-label":F("newChatTitle"),autoComplete:"off",autoFocus:!0,className:"w-full",id:"newChatTitle",maxLength:100,onChange:e=>k(e.target.value),placeholder:z||F("enterNewTitle"),ref:L,value:I}),(0,s.jsx)(b.l,{className:"mt-2",count:I.length,max:100,message:"Title must be less than ".concat(100," characters")})]})]}),(0,s.jsxs)(n.ModalFooter,{children:[(0,s.jsx)(i.z,{onClick:P,size:"sm",type:"button",variant:"secondary",children:F("cancel")}),(0,s.jsx)(i.z,{disabled:u,size:"sm",type:"submit",children:u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.v,{"aria-hidden":"true",className:"size-4"}),(0,s.jsx)("span",{children:F("saving")})]}):F("save")})]})]})})}},50941:(e,t,a)=>{a.d(t,{G:()=>s});let s=(0,a(9509).$)("325318c25f3ca9864636ca895908a4168420da49")}}]);