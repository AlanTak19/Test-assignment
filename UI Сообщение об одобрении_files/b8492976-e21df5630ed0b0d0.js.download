"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4411],{63026:(e,t,r)=>{r.d(t,{Ox:()=>eA});var n,a,o,s,i,l,u,c,d,m=r(32167),f=r(34802),p=r(82226),h=r(44135),v=Object.defineProperty,y=(e,t)=>{for(var r in t)v(e,r,{get:t[r],enumerable:!0})};async function g(e){return void 0===e?Promise.resolve():new Promise(t=>setTimeout(t,e))}var z="AI_RetryError",b=`vercel.ai.error.${z}`,x=Symbol.for(b),w=class extends f.AX{constructor({message:e,reason:t,errors:r}){super({name:z,message:e}),this[n]=!0,this.reason=t,this.errors=r,this.lastError=r[r.length-1]}static isInstance(e){return f.AX.hasMarker(e,b)}static isRetryError(e){return e instanceof Error&&e.name===z&&"string"==typeof e.reason&&Array.isArray(e.errors)}toJSON(){return{name:this.name,message:this.message,reason:this.reason,lastError:this.lastError,errors:this.errors}}};n=x;var A={spanContext:()=>T,setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording:()=>!1,recordException(){return this}},T={traceId:"",spanId:"",traceFlags:0},S="AI_DownloadError",E=`vercel.ai.error.${S}`,I=Symbol.for(E),_=class extends f.AX{constructor({url:e,statusCode:t,statusText:r,cause:n,message:o=null==n?`Failed to download ${e}: ${t} ${r}`:`Failed to download ${e}: ${n}`}){super({name:S,message:o,cause:n}),this[a]=!0,this.url=e,this.statusCode=t,this.statusText=r}static isInstance(e){return f.AX.hasMarker(e,E)}static isDownloadError(e){return e instanceof Error&&e.name===S&&"string"==typeof e.url&&(null==e.statusCode||"number"==typeof e.statusCode)&&(null==e.statusText||"string"==typeof e.statusText)}toJSON(){return{name:this.name,message:this.message,url:this.url,statusCode:this.statusCode,statusText:this.statusText,cause:this.cause}}};a=I;var k=[{mimeType:"image/gif",bytes:[71,73,70]},{mimeType:"image/png",bytes:[137,80,78,71]},{mimeType:"image/jpeg",bytes:[255,216]},{mimeType:"image/webp",bytes:[82,73,70,70]}],C="AI_InvalidDataContentError",M=`vercel.ai.error.${C}`,$=Symbol.for(M),j=class extends f.AX{constructor({content:e,cause:t,message:r=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:C,message:r,cause:t}),this[o]=!0,this.content=e}static isInstance(e){return f.AX.hasMarker(e,M)}static isInvalidDataContentError(e){return e instanceof Error&&e.name===C&&null!=e.content}toJSON(){return{name:this.name,message:this.message,stack:this.stack,cause:this.cause,content:this.content}}};o=$;var N=p.z.union([p.z.string(),p.z.instanceof(Uint8Array),p.z.instanceof(ArrayBuffer),p.z.custom(e=>{var t,r;return null!=(r=null==(t=globalThis.Buffer)?void 0:t.isBuffer(e))&&r},{message:"Must be a Buffer"})]);function R(e){if(e instanceof Uint8Array)return e;if("string"==typeof e)try{return convertBase64ToUint8Array(e)}catch(t){throw new j({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new j({content:e})}var X="AI_InvalidMessageRoleError",D=`vercel.ai.error.${X}`,F=Symbol.for(D),O=class extends f.AX{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:X,message:t}),this[s]=!0,this.role=e}static isInstance(e){return f.AX.hasMarker(e,D)}static isInvalidMessageRoleError(e){return e instanceof Error&&e.name===X&&"string"==typeof e.role}toJSON(){return{name:this.name,message:this.message,stack:this.stack,role:this.role}}};s=F;var q="AI_InvalidArgumentError",B=`vercel.ai.error.${q}`,J=Symbol.for(B);f.AX,i=J;var U=p.z.lazy(()=>p.z.union([p.z.null(),p.z.string(),p.z.number(),p.z.boolean(),p.z.record(p.z.string(),U),p.z.array(U)])),P=p.z.record(p.z.string(),p.z.record(p.z.string(),U)),L=p.z.object({type:p.z.literal("text"),text:p.z.string(),experimental_providerMetadata:P.optional()}),V=p.z.object({type:p.z.literal("image"),image:p.z.union([N,p.z.instanceof(URL)]),mimeType:p.z.string().optional(),experimental_providerMetadata:P.optional()}),G=p.z.object({type:p.z.literal("tool-call"),toolCallId:p.z.string(),toolName:p.z.string(),args:p.z.unknown()}),H=p.z.object({type:p.z.literal("tool-result"),toolCallId:p.z.string(),toolName:p.z.string(),result:p.z.unknown(),isError:p.z.boolean().optional(),experimental_providerMetadata:P.optional()}),K=p.z.object({role:p.z.literal("system"),content:p.z.string(),experimental_providerMetadata:P.optional()}),Q=p.z.object({role:p.z.literal("user"),content:p.z.union([p.z.string(),p.z.array(p.z.union([L,V]))]),experimental_providerMetadata:P.optional()}),W=p.z.object({role:p.z.literal("assistant"),content:p.z.union([p.z.string(),p.z.array(p.z.union([L,G]))]),experimental_providerMetadata:P.optional()}),Y=p.z.object({role:p.z.literal("tool"),content:p.z.array(H),experimental_providerMetadata:P.optional()});function Z(e,{contentType:t,dataStreamVersion:r}){var n;let a=new Headers(null!=(n=null==e?void 0:e.headers)?n:{});return a.has("Content-Type")||a.set("Content-Type",t),void 0!==r&&a.set("X-Vercel-AI-Data-Stream",r),a}p.z.union([K,Q,W,Y]);var ee="AI_NoObjectGeneratedError",et=`vercel.ai.error.${ee}`,er=Symbol.for(et),en=class extends f.AX{constructor({message:e="No object generated."}={}){super({name:ee,message:e}),this[l]=!0}static isInstance(e){return f.AX.hasMarker(e,et)}static isNoObjectGeneratedError(e){return e instanceof Error&&e.name===ee}toJSON(){return{name:this.name,cause:this.cause,message:this.message,stack:this.stack}}};l=er;(0,m.bF)({prefix:"aiobj-",size:24});(0,m.bF)({prefix:"aiobj-",size:24});var ea="AI_InvalidToolArgumentsError",eo=`vercel.ai.error.${ea}`,es=Symbol.for(eo);f.AX,u=es;var ei="AI_NoSuchToolError",el=`vercel.ai.error.${ei}`,eu=Symbol.for(el);f.AX,c=eu;var ec=Symbol.for("vercel.ai.error.AI_MessageConversionError");f.AX;function ed(e,t){let r,n;let a=e.getReader(),o=t.getReader(),s=!1,i=!1;async function l(e){try{null==r&&(r=a.read());let t=await r;r=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}async function u(e){try{null==n&&(n=o.read());let t=await n;n=void 0,t.done?e.close():e.enqueue(t.value)}catch(t){e.error(t)}}return new ReadableStream({async pull(e){try{if(s){await u(e);return}if(i){await l(e);return}null==r&&(r=a.read()),null==n&&(n=o.read());let{result:t,reader:c}=await Promise.race([r.then(e=>({result:e,reader:a})),n.then(e=>({result:e,reader:o}))]);t.done||e.enqueue(t.value),c===a?(r=void 0,t.done&&(await u(e),s=!0)):(n=void 0,t.done&&(i=!0,await l(e)))}catch(t){e.error(t)}},cancel(){a.cancel(),o.cancel()}})}(0,m.bF)({prefix:"aitxt-",size:24}),(0,m.bF)({prefix:"aitxt-",size:24});var em="AI_NoSuchProviderError",ef=`vercel.ai.error.${em}`,ep=Symbol.for(ef);function eh(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,a){let o="string"==typeof e?e:e.content;a.enqueue(t.encode(o)),r+=o,n.onToken&&await n.onToken(o),n.onText&&"string"==typeof e&&await n.onText(e)},async flush(){let e="experimental_onFunctionCall"in n;n.onCompletion&&await n.onCompletion(r),n.onFinal&&!e&&await n.onFinal(r)}})}f.JJ,d=ep;function ev(){let e=new TextEncoder,t=new TextDecoder;return new TransformStream({transform:async(r,n)=>{let a=t.decode(r);n.enqueue(e.encode((0,h.vl)("text",a)))}})}new TextDecoder("utf-8");function ey(e,t){return eg(e,t)}function eg(e,t){return e.pipeThrough(new TransformStream({transform:async(e,t)=>{var r;if("string"==typeof e){t.enqueue(e);return}if("event"in e){"on_chat_model_stream"===e.event&&eb(null==(r=e.data)?void 0:r.chunk,t);return}eb(e,t)}})).pipeThrough(eh(t)).pipeThrough(ev())}function ez(e,t){var r;let n=eg(e,null==t?void 0:t.callbacks),a=null==t?void 0:t.data,o=null==t?void 0:t.init;return new Response(a?ed(a.stream,n):n,{status:null!=(r=null==o?void 0:o.status)?r:200,statusText:null==o?void 0:o.statusText,headers:Z(o,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function eb(e,t){if("string"==typeof e.content)t.enqueue(e.content);else for(let r of e.content)"text"===r.type&&t.enqueue(r.text)}function ex(e,t){return(function(e){let t;let r=e[Symbol.asyncIterator](),n=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return new ReadableStream({async pull(e){var t;let{value:a,done:o}=await r.next();if(o){e.close();return}let s=n(null!=(t=a.delta)?t:"");s&&e.enqueue(s)}})})(e).pipeThrough(eh(t)).pipeThrough(ev())}function ew(e,t={}){var r;let{init:n,data:a,callbacks:o}=t,s=ex(e,o);return new Response(a?ed(a.stream,s):s,{status:null!=(r=null==n?void 0:n.status)?r:200,statusText:null==n?void 0:n.statusText,headers:Z(n,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}y({},{toAIStream:()=>ey,toDataStream:()=>eg,toDataStreamResponse:()=>ez}),y({},{toDataStream:()=>ex,toDataStreamResponse:()=>ew});Symbol("internal_openai_fn_messages"),Response;var eA=m.Ox}}]);