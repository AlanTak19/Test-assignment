(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4723],{76665:(e,t,n)=>{"use strict";n.d(t,{Iw:()=>f,J5:()=>u,Ve:()=>c,YM:()=>m});var r=n(69160),a=n(79995),s=n(32266),l=n(4042),i=n(68257),o=n(93150);let c={duration:.35,ease:[.35,.2,.14,.95]},d={x:0,y:0,z:0,rotate:0,scale:1,skew:0,opacity:1};function u(e){let{children:t,preventAnimation:n=!1}=e;return(0,r.jsx)(i.E.span,{animate:{opacity:1},initial:{opacity:n?1:0},children:t})}function m(e){let{children:t,variants:n,transition:u}=e,{ref:m,controls:f,fullVariants:h}=function(e,t,n){let r=(0,s.J)(),i=(0,a.useContext)(o.X),u=(0,l.E)(),m=(0,a.useRef)(null),f=(0,a.useRef)("idle"),h=(0,a.useRef)(!1),p=(0,a.useRef)(!1),x=(0,a.useMemo)(()=>({idle:{...d,...t.idle},hover:{...d,...t.hover},tap:{...d,...t.tap}}),[t]),g=(0,a.useCallback)(async e=>{let t=x[f.current],r=x[e];if(h.current&&!1===t.interruptible||p.current||e===f.current&&h.current)return;h.current=!0;let a=f.current;f.current=e;try{await u.start({...r,transition:r.transition||n||c})}catch(e){f.current=a}finally{if(h.current=!1,r.after&&f.current===e){let{state:e,delay:t=0}=r.after;p.current=!0,setTimeout(()=>{p.current=!1,g(e)},1e3*t)}else f.current!==e&&g(f.current)}},[u,n,x]);return(0,a.useEffect)(()=>{if(!i||r)return;let t=function e(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t?"BUTTON"===t.tagName||"A"===t.tagName?t:n>10?(console.warn("Animated Icon can't find valid parent element (<button> or <a>) after 10 iterations. Falling back to root element."),null):e(t.parentElement,n+1):null}(m.current);if(t)return i.registerIcon(e,{parent:t,transitionTo:g}),()=>{i.unregisterIcon(e)}},[]),{ref:m,controls:u,fullVariants:x}}((0,a.useRef)(Math.random().toString(36).substr(2,9)).current,n,u);return(0,r.jsx)(i.E.span,{animate:f,className:"transition-none",initial:"idle",ref:m,variants:h,children:t})}function f(e){let{children:t,hideOverflow:n}=e;return(0,r.jsx)("span",{className:"grid [&>*]:[grid-area:1/1] ".concat(n?"overflow-hidden":""),children:t})}},93150:(e,t,n)=>{"use strict";n.d(t,{AnimatedIconProvider:()=>l,X:()=>s});var r=n(69160),a=n(79995);let s=(0,a.createContext)(null);function l(e){let{children:t}=e,[n,l]=(0,a.useState)(()=>new Map),i=(0,a.useRef)(null),o=(0,a.useCallback)(e=>{let t=e.target;n.forEach((n,r)=>{if(n.parent.contains(t))switch(e.type){case"mouseover":i.current!==r&&(i.current=r,n.transitionTo("hover"));break;case"mouseout":n.parent.contains(e.relatedTarget)||(i.current=null,n.transitionTo("idle"));break;case"mousedown":n.transitionTo("tap");break;case"mouseup":n.transitionTo(i.current===r?"hover":"idle")}else"mouseover"===e.type&&i.current===r&&(i.current=null,n.transitionTo("idle"))})},[n]);(0,a.useEffect)(()=>(window.addEventListener("mouseover",o,!0),window.addEventListener("mouseout",o,!0),window.addEventListener("mousedown",o,!0),window.addEventListener("mouseup",o,!0),()=>{window.removeEventListener("mouseover",o,!0),window.removeEventListener("mouseout",o,!0),window.removeEventListener("mousedown",o,!0),window.removeEventListener("mouseup",o,!0)}),[o]);let c=(0,a.useCallback)((e,t)=>{l(n=>new Map(n).set(e,t))},[]),d=(0,a.useCallback)(e=>{l(t=>{let n=new Map(t);return n.delete(e),n})},[]);return(0,r.jsx)(s.Provider,{value:{registerIcon:c,unregisterIcon:d},children:t})}},57483:(e,t,n)=>{"use strict";n.d(t,{V:()=>s});var r=n(69160),a=n(59700);function s(e){let{size:t=16,className:n}=e;return(0,r.jsxs)("svg",{className:(0,a.cn)("copy-icon overflow-visible",n),fill:"currentColor",height:t,viewBox:"0 0 16 16",width:t,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("style",{children:'.copy-icon {\n            * {\n              transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95), d 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n            }\n          }\n          button:has(.copy-icon):hover, button:has(.copy-icon):focus-visible {\n            .left {\n              d: path("M 2.75 0.5 C 1.7835 0.5 1 1.2835 1 2.25 V 9.75 C 1 10.7165 1.7835 11.5 2.75 11.5 H 3.75 H 6.5 V 10 H 3.75 H 2.75 C 2.6119 10 2.5 9.8881 2.5 9.75 V 2.25 C 2.5 2.1119 2.6119 2 2.75 2 H 8.25 C 8.3881 2 8.5 2.1119 8.5 2.25 V 5 H 10 V 2.25 C 10 1.2835 9.2165 0.5 8.25 0.5 H 2.75 Z");\n              transform: translate(-1px, -1px);\n            }\n            .right {\n              transform: translate(1px, 1px);\n            }\n          }'}),(0,r.jsx)("path",{className:"left",clipRule:"evenodd",d:"M2.75 0.5C1.7835 0.5 1 1.2835 1 2.25V9.75C1 10.7165 1.7835 11.5 2.75 11.5H3.75H4.5V10H3.75H2.75C2.61193 10 2.5 9.88807 2.5 9.75V2.25C2.5 2.11193 2.61193 2 2.75 2H8.25C8.38807 2 8.5 2.11193 8.5 2.25V3H10V2.25C10 1.2835 9.2165 0.5 8.25 0.5H2.75Z",fill:"currentColor",fillRule:"evenodd"}),(0,r.jsx)("path",{className:"right",clipRule:"evenodd",d:"M7.75 4.5C6.7835 4.5 6 5.2835 6 6.25V13.75C6 14.7165 6.7835 15.5 7.75 15.5H13.25C14.2165 15.5 15 14.7165 15 13.75V6.25C15 5.2835 14.2165 4.5 13.25 4.5H7.75ZM7.5 6.25C7.5 6.11193 7.61193 6 7.75 6H13.25C13.3881 6 13.5 6.11193 13.5 6.25V13.75C13.5 13.8881 13.3881 14 13.25 14H7.75C7.61193 14 7.5 13.8881 7.5 13.75V6.25Z",fill:"currentColor",fillRule:"evenodd"})]})}},62312:(e,t,n)=>{"use strict";n.d(t,{K:()=>a});var r=n(69160);function a(){return(0,r.jsxs)("svg",{className:"download-icon overflow-visible",fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("style",{children:".download-icon {\n            cursor: pointer;\n            transform-origin: center;\n        }\n        .download-icon .arrow-part {\n            transition: transform 0.35s cubic-bezier(0.35, 0.2, 0.14, 0.95);\n             transform-origin: center;\n        }\n        button:has(.download-icon):hover .download-icon .arrow-part, button:has(.download-icon):focus-visible .download-icon .arrow-part {\n          transform: translateY(-1.5px);\n        }\n        "}),(0,r.jsx)("g",{className:"arrow-part",children:(0,r.jsx)("path",{clipRule:"evenodd",d:"M8.75 1V1.75V8.68934L10.7197 6.71967L11.25 6.18934L12.3107 7.25L11.7803 7.78033L8.70711 10.8536C8.31658 11.2441 7.68342 11.2441 7.29289 10.8536L4.21967 7.78033L3.68934 7.25L4.75 6.18934L5.28033 6.71967L7.25 8.68934V1.75V1H8.75Z",fill:"currentColor",fillRule:"evenodd"})}),(0,r.jsx)("g",{className:"rectangle-part",children:(0,r.jsx)("path",{clipRule:"evenodd",d:"M13.5 9.25V13.5H2.5V9.25V8.5H1V9.25V14C1 14.5523 1.44771 15 2 15H14C14.5523 15 15 14.5523 15 14V9.25V8.5H13.5V9.25Z",fill:"currentColor",fillRule:"evenodd"})})]})}n(79995)},60130:(e,t,n)=>{"use strict";n.d(t,{E:()=>i});var r=n(69160),a=n(36762),s=n(85933),l=n(59700);function i(e){let{knowledgeSource:t,className:n}=e;switch(null==t?void 0:t.toLowerCase()){case"nextjs.org":return(0,r.jsx)(s.default,{alt:"Next.js Logo",className:n,height:16,src:"/chat-static/citation/nextjs.svg",width:16});case"vercel.com":case"sdk.vercel.ai":return(0,r.jsx)(s.default,{alt:"Vercel Logo",className:n,height:16,src:"/chat-static/citation/vercel.svg",width:16});case"turbo.build":return(0,r.jsx)(s.default,{alt:"Turbopack Logo",className:n,height:16,src:"/chat-static/citation/turbo.svg",width:16});case"svelte.dev":case"kit.svelte.dev":return(0,r.jsx)(s.default,{alt:"Svelte Logo",className:(0,l.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/svelte.svg",width:16});case"docs.stripe.com":return(0,r.jsx)(s.default,{alt:"Stripe Logo",className:(0,l.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/stripe.svg",width:12});case"remix.run":return(0,r.jsx)(s.default,{alt:"Remix Logo",className:(0,l.cn)(n,"rounded-none"),height:12,src:"/chat-static/citation/remix.svg",width:12});case"vuejs.org":return(0,r.jsx)(s.default,{alt:"Vue Logo",className:(0,l.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/vue.svg",width:16});case"react.dev":return(0,r.jsx)(s.default,{alt:"React Logo",className:(0,l.cn)(n,"rounded-none"),height:16,src:"/chat-static/citation/react.svg",width:16});case"typescriptlang.org":return(0,r.jsx)(s.default,{alt:"Typescript Logo",className:(0,l.cn)(n),height:16,src:"/chat-static/citation/ts.svg",width:16});case"github.com":return(0,r.jsx)(s.default,{alt:"Github Logo",className:n,height:16,src:"/chat-static/citation/github.svg",width:16});case"ui.shadcn.com":return(0,r.jsx)(s.default,{alt:"shadcn/ui Logo",className:(0,l.cn)(n),height:16,src:"/chat-static/citation/shadcn-ui.svg",width:16});case"radix-ui.com":return(0,r.jsx)(s.default,{alt:"Radix UI Logo",className:(0,l.cn)(n,"size-3.5 translate-x-0.5 rounded-none"),height:14,src:"/chat-static/citation/radix-ui.svg",width:14});case"orm.drizzle.team":return(0,r.jsx)(s.default,{alt:"Drizzle Logo",className:(0,l.cn)(n,"dark:invert"),height:22,src:"/chat-static/citation/drizzle.svg",width:22});case"supabase.com":return(0,r.jsx)(s.default,{alt:"Supabase Logo",className:(0,l.cn)(n),height:14,src:"/chat-static/citation/supabase.svg",width:14});case"www.prisma.io":return(0,r.jsx)(s.default,{alt:"Prisma Logo",className:(0,l.cn)(n,"dark:invert"),height:14,src:"/chat-static/citation/prisma.svg",width:14});case"playwright.dev":return(0,r.jsx)(s.default,{alt:"Playwright Logo",className:(0,l.cn)(n),height:14,src:"/chat-static/citation/playwright.svg",width:14});default:return(0,r.jsx)(a.T,{className:(0,l.cn)(n,"rounded-none"),size:16})}}},12117:(e,t,n)=>{"use strict";n.d(t,{dK:()=>m,dS:()=>f});var r=n(69160),a=n(79995);n(60130),n(35409);var s=n(78251),l=n(84639),i=n(83973),o=n(23411),c=n(15214),d=n(68257),u=n(23324);function m(e){let{citations:t}=e;return t.map(e=>{let t="cite-".concat(e.messageId,"-").concat(e.index);return(0,r.jsx)(s.R,{id:t,children:(0,r.jsxs)("a",{className:"inline-flex min-w-0 items-baseline gap-1 no-underline",href:e.url,rel:"noopener noreferrer",target:"_blank",children:[(0,r.jsx)("span",{className:"line-clamp-1",children:e.title}),(0,r.jsx)(l.Z,{className:"size-3 shrink-0"})]})},t)})}function f(e){let{urls:t,className:n}=e,[s,l]=(0,a.useState)(0),m=["Browsing search results"];null==t||t.forEach((e,t)=>{let n=e.replace(/^https?:\/\//,"");m[t+1]="Browsing web page: ".concat(n)}),m[Object.keys(m).length]="Synthesizing ".concat(null==t?void 0:t.length," source").concat((null==t?void 0:t.length)===1?"":"s");let f=Object.keys(m).length;return((0,a.useEffect)(()=>{(async()=>{for(let e=0;e<f;e++)0!==e&&await (0,u._v)(2e3),l(e)})()},[f]),t&&0!==t.length)?(0,r.jsx)("div",{className:(0,o.Z)("!mt-[6px]",n),children:(0,r.jsx)("div",{className:"shimmer relative flex items-center gap-1.5 text-gray-500",children:(0,r.jsxs)(c.M,{mode:"popLayout",presenceAffectsLayout:!0,children:[(0,r.jsx)(i.Z,{className:"size-4 shrink-0 leading-[normal]"}),(0,r.jsx)("div",{className:"mask relative grow leading-[15px]",children:(0,r.jsx)(c.M,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,r.jsx)(d.E.span,{animate:{y:0},className:"inline-block grow text-ellipsis whitespace-nowrap text-[15px] leading-none md:w-[calc(100%_-_100px)]",exit:{y:-24},initial:{y:24},layout:!0,transition:{type:"tween",duration:.3},children:m[s]},"carousel-".concat(s))})})]})})}):null}n(18396)},36076:(e,t,n)=>{"use strict";n.d(t,{G:()=>u});var r=n(69160),a=n(76339),s=n(10556),l=n(34496),i=n(19446),o=n(62312),c=n(95781),d=n(24815);function u(e){let{fileName:t="file.txt",value:n,caller:u,additionalHeaderActions:m,allowCopyCode:f,allowDownloadCode:h,closeHandler:p,isTabbed:x,allowClose:g}=e,{isCopied:b,copyToClipboard:v}=(0,a.m)({timeout:2e3}),j=(0,d.N)("codeBlockActions"),w=async()=>{if(!b)switch(await v(n),u){case"inline":return(0,s.j)("CopyCodeInline",{code:n});case"executable":return(0,s.j)("CopyCodeExecutable",{code:n});case"v0":return(0,s.j)("CopyCodeV0",{code:n})}};return(0,r.jsxs)(r.Fragment,{children:[m&&m.length>0?m:null,f&&(0,r.jsx)(l.O,{"aria-label":j("copy"),onClick:w,outline:!x,tooltip:x?{side:"bottom",content:j("copy")}:j("copy"),children:(0,r.jsx)(c.$,{isCopied:b,size:"inline"===u?14:void 0})}),h&&(0,r.jsx)(l.O,{"aria-label":j("download"),onClick:()=>{let e=window.prompt("Enter file name",t);if(!e)return;let r=new Blob([n],{type:"text/plain"}),a=URL.createObjectURL(r),l=document.createElement("a");switch(l.download=e,l.href=a,l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a),u){case"executable":return(0,s.j)("DownloadCodeExecutable",{code:n});case"v0":return(0,s.j)("DownloadCodeV0",{code:n})}},outline:!x,tooltip:x?{side:"bottom",content:j("download")}:j("download"),children:(0,r.jsx)("span",{"aria-hidden":!0,children:(0,r.jsx)(o.K,{})})}),g&&p&&(0,r.jsx)(l.O,{"aria-label":j("close"),onClick:p,outline:!x,tooltip:x?{side:"bottom",content:j("close")}:j("close"),children:(0,r.jsx)("span",{"aria-hidden":!0,children:(0,r.jsx)(i.X,{})})})]})}},34496:(e,t,n)=>{"use strict";n.d(t,{O:()=>l});var r=n(69160),a=n(18396),s=n(59700);function l(e){let{className:t,outline:n,...l}=e;return(0,r.jsx)(a.z,{className:(0,s.cn)("size-7 rounded-md",!n&&"text-gray-500",t),size:"xs",variant:n?"secondary":"ghost",...l})}},29301:(e,t,n)=>{"use strict";n.d(t,{d:()=>D});var r=n(69160),a=n(79995),s=n(83499),l=n(59700),i=n(37843),o=n(12312);function c(e){let{className:t,headerClassName:n,language:a,actions:s,syntax:o}=e;return(0,r.jsxs)("div",{className:(0,l.cn)("codeblock border-alpha-400 relative flex size-full flex-col rounded-lg border font-sans",t),"data-seg":"root",children:[(0,r.jsxs)("div",{className:(0,l.cn)("bg-muted flex h-[40px] w-full shrink-0 items-center justify-between rounded-t-lg border-b pl-2.5 pr-1.5",n),"data-seg":"skip",children:[a?(0,r.jsx)("span",{className:"text-gray-500",children:(0,r.jsx)(i.a,{lang:a})}):null,(0,r.jsx)("div",{className:"flex items-center space-x-1 text-gray-500",children:s})]}),o]})}function d(e){let{className:t,showLineNumbers:n,actions:a,fileName:s,syntax:i}=e,{isPublished:c}=(0,o.I)();return c?(0,r.jsxs)("div",{className:(0,l.cn)("codeblock bg-muted flex size-full flex-col overflow-hidden rounded-lg pt-3",t),"data-seg":"root",children:[(0,r.jsxs)("div",{className:"z-10 mx-3 flex translate-y-px justify-between","data-seg":"skip",children:[(0,r.jsx)(u,{active:!0,fileName:s}),(0,r.jsx)("div",{className:"flex -translate-y-1.5 items-center gap-1",children:a})]}),(0,r.jsx)("div",{className:(0,l.cn)("border-alpha-400 bg-background relative flex flex-1 flex-col overflow-hidden border-t px-3 font-sans",n&&"px-0"),children:i})]}):(0,r.jsx)("div",{className:(0,l.cn)("codeblock bg-muted flex size-full flex-col",t),"data-seg":"root",children:(0,r.jsx)("div",{className:(0,l.cn)("relative flex flex-1 flex-col overflow-hidden px-3 font-sans",n&&"px-0"),children:i})})}function u(e){let{active:t,fileName:n,onClick:a}=e;return(0,r.jsxs)("button",{className:(0,l.cn)("font-regular border-alpha-400 pointer-events-none relative h-full whitespace-nowrap rounded-t-md border border-b-0 px-4 pb-1 pt-1.5 text-[13px] text-gray-500 transition-colors",t?"bg-background font-medium":"border-transparent bg-transparent hover:bg-gray-200"),onClick:a,children:[(0,r.jsx)(m,{active:t,side:"left"}),n,(0,r.jsx)(m,{active:t,side:"right"})]})}function m(e){let{active:t,side:n}=e;if(!t)return null;let a="left"===n;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:(0,l.cn)("bg-muted absolute bottom-0 z-20 h-[4px] w-[4px] border-b border-gray-200",a?"right-[-4px] rounded-bl-[3px] border-l":"left-[-4px] rounded-br-[3px] border-r")}),(0,r.jsx)("div",{className:(0,l.cn)("bg-background absolute bottom-0 z-10 h-[4px] w-[4px]",a?"right-[-4px]":"left-[-4px]")})]})}var f=n(83660),h=n(992);n(21270);var p=n(36076),x=n(59461),g=n.n(x),b=n(9923),v=n(18396),j=n(99706),w=n(24815),y=n(10556),k=n(97077),N=n(70934);let C=(0,n(9509).$)("2c3087b4c59c09f781ae6029c27f2a80e3755656");var I=n(15214),z=n(68257),S=n(66694);function L(e){let{hasEdited:t,editValue:n,resetValue:s,originalValue:l}=e,[i,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),u=(0,j.zi)(),m=(0,j.sd)(),f=(0,w.N)("codeBlockActions"),h=null!==n&&n!==l;if((0,a.useEffect)(()=>{if(!h)return;let e=async e=>{e.metaKey&&"s"===e.key&&(e.preventDefault(),await p())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n]),(0,a.useEffect)(()=>{let e=e=>{h&&(e.preventDefault(),e.returnValue="")};return window.addEventListener("beforeunload",e),()=>{window.removeEventListener("beforeunload",e)}},[h]),!u)return null;let p=async()=>{if((0,y.j)("SaveEditCode",{blockId:u.id}),!n)return k.Am.error(f("failedToSaveChanges"));o(!0);let e=await C(u.id,n);o(!1),e.success?(m({...u,hasSourceBeenEdited:!0}),d(!0),setTimeout(()=>d(!1),2e3),k.Am.success(f("savedChanges"))):(0,N.R)(e)||k.Am.error(f("failedToSaveChanges"))};return(0,r.jsx)(I.M,{children:h&&!c&&t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeOut"},className:"from-muted pointer-events-none absolute inset-x-0 bottom-0 z-10 flex h-36 items-end justify-center bg-gradient-to-t to-transparent"},"unsaved-changes-bg"),(0,r.jsx)(z.E.div,{initial:{opacity:0,y:20,scale:.95,width:320},animate:{opacity:1,y:0,scale:1,width:i?96:320},exit:{opacity:0},transition:{duration:.15,ease:"easeOut",width:{type:"spring",stiffness:300,damping:30}},className:"shadow-modal bg-background absolute inset-x-0 bottom-3 z-20 mx-auto flex h-11 items-center justify-between rounded-full p-2 pl-3 text-sm font-medium",children:i?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)(S.$,{size:16}),"Saving"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(b.v,{className:"!text-gray-500"}),"Unsaved Changes"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(v.z,{size:"sm",className:"h-7",rounded:!0,variant:"secondary",disabled:i,onClick:()=>{(0,y.j)("ResetUnsavedEditCode",{blockId:u.id}),o(!0);try{s(),k.Am.success(f("resetChanges")),setTimeout(()=>d(!1),2e3)}catch(e){k.Am.error(f("failedToResetChanges"))}o(!1)},children:f("reset")}),(0,r.jsx)(v.z,{size:"sm",className:"h-7",rounded:!0,disabled:i,onClick:p,children:f("save")})]})]})},"unsaved-changes-island")]}):null})}var E=n(83946);let M=/\n/g;function R(e){return(e.match(M)||"").length+1}let P=(0,h.default)(()=>Promise.all([n.e(6378),n.e(1714),n.e(3163)]).then(n.bind(n,13163)).then(e=>e.CodeEditor),{loadableGenerated:{webpack:()=>[13163]},ssr:!1}),T=(0,a.memo)(function(e){let t,{value:n,language:i,showLineNumbers:o,wrapLongLines:c,isTabbed:d,originalCode:u}=e,m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"line",n=(0,a.useRef)(e),r=(0,a.useRef)("line"===t?200:20),s=(0,a.useRef)(Date.now()),[l,i]=(0,a.useState)(e);return(0,a.useEffect)(()=>{if(n.current===e)return;if(!e.startsWith(n.current)){i(e),r.current="line"===t?200:20,n.current=e,s.current=Date.now();return}let a="line"===t?Math.max(1,R(e)-R(n.current)):e.length-n.current.length,l=Date.now()-s.current;r.current=(r.current+l/a*2)/3,s.current=Date.now();let o=Math.max(r.current,1),c=Math.ceil(o/r.current),d=setInterval(()=>{i(r=>{if(r===e)return clearInterval(d),r;let a="";if("line"===t){let t=e.slice(r.length).indexOf("\n");a=-1===t?e:e.slice(0,r.length+t+1)}else a=e.slice(0,r.length+c);return n.current=a,a})},o);return()=>clearInterval(d)},[e,t]),l}(n,u?"line":"char"),h=(0,f.o)(i),p=(0,a.useMemo)(()=>{if(u)return u.split("\n")},[u]),x=(m.match(/\n/g)||[]).length;if((!m||0===x)&&u)x=(u.match(/\n/g)||[]).length,t=e=>({className:(0,l.cn)("opacity-50",1===e&&"block w-full animate-pulse bg-gray-100 opacity-100")}),m=u;else if(p&&p.length>x-1){let e=m.lastIndexOf("\n"),n=(x=((m=m.slice(0,e>0?e:void 0)).match(/\n/g)||[]).length)+1,r=p.slice(x+1),a=r.join("\n");x+=r.length,t=e=>({className:(0,l.cn)(e===n&&"block w-full bg-blue-400/20",e>n&&"opacity-50")}),a&&(m=m+"\n"+a)}return(0,r.jsx)(s.Z,{PreTag:"div",customStyle:{display:"flex",margin:0,width:"max-content",height:"min-content",padding:d?"12px 12px 10px 12px":"8px 10px",textShadow:"none",borderRadius:"0 0 calc(var(--radius) - 2px) calc(var(--radius) - 2px)",WebkitOverflowScrolling:"touch",backgroundColor:"transparent",fontFamily:"var(--font-geist-mono)",lineHeight:"1.55",fontSize:"0.8125rem"},language:h,lineNumberContainerStyle:{userSelect:"none",whiteSpace:"break-spaces",textAlign:"right",display:"flex",flexDirection:"column"},lineNumberStyle:{display:"inline-block",minWidth:"".concat(Math.max(x.toString().length,2),"ch"),padding:0,margin:"0 12px 0 0",color:"rgb(var(--gray-400))",userSelect:"none"},lineProps:t,showLineNumbers:o,useInlineStyles:!1,wrapLines:!0,wrapLongLines:c,children:m})}),D=(0,a.memo)(e=>{let{language:t,value:n,originalCode:s,allowQuoting:i=!1,allowCopyCode:o=!0,allowDownloadCode:u=!0,allowClose:m=!1,closeHandler:h=null,className:x,headerClassName:b,codeWrapperClassName:v,fileName:j="file.txt",showLineNumbers:w=!1,wrapLongLines:y=!1,additionalHeaderActions:k,caller:N,ref:C,editable:I,onEdit:z,editValue:S,hasSourceBeenEdited:M}=e,R="inline"!==N,[D,V]=a.useState(),[A,_]=a.useState(!1);(0,a.useEffect)(()=>_(!1),[n]);let O=z?g()(z,500):void 0,F=e=>{void 0!==e&&(null==O||O(e),V(e))},B=(0,r.jsx)(p.G,{additionalHeaderActions:k,allowClose:m,allowCopyCode:o,allowDownloadCode:u,caller:N,closeHandler:h,fileName:j,isTabbed:R,value:D||n}),H=(0,f.o)(t),Z=(0,a.useRef)(null),K=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(P,{language:H,editorRef:Z,onEdit:e=>{F(e),_(!0)},value:n,disabled:!I}),I&&(0,r.jsx)(L,{resetValue:()=>{var e;V(n);let t=Math.max(n.length,null!==(e=null==S?void 0:S.length)&&void 0!==e?e:0);Z.current&&(0,E.i)(Z.current,n,0,t),null==z||z(n)},hasEdited:A,originalValue:n,editValue:null!=S?S:null})]}),q=I?K:(0,r.jsx)("div",{className:(0,l.cn)("group size-full overflow-scroll",v),children:(0,r.jsx)("div",{className:"size-full text-gray-500 group-has-[.language-text]:text-black group-has-[.token]:text-black","data-seg":i?"code-root":void 0,children:(0,r.jsx)(T,{isTabbed:R,originalCode:s,language:t,showLineNumbers:w,value:n,wrapLongLines:y})})}),J={className:x,headerClassName:b,language:t,showLineNumbers:w,fileName:j,actions:B,syntax:q};return R?(0,r.jsx)(d,{...J}):(0,r.jsx)(c,{...J})});D.displayName="CodeBlock"},83660:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,o:()=>a});let r=["javascript","typescript","python"];function a(e){switch(e){case"plaintext":case"slim":case"shaderlab":return"text";case"bat":return"batch";case"dockercompose":return"yaml";case"git-rebase":case"git-commit":return"markdown";case"typescriptreact":return"tsx";case"javascriptreact":case"svelte":case"astro":return"jsx";case"jsonc":return"json5";case"objective-c":case"objective-cpp":return"objectivec";case"perl6":return"perl";case"shellscript":return"bash";case"terraform":return"hcl";case"bibtex":return"tex";case"cuda-cpp":return"cpp";case"jade":return"pascal";case"vue":case"vue-html":return"html";case"xsl":return"xml";default:return e}}},1969:(e,t,n)=>{"use strict";n.d(t,{PortalProvider:()=>l,_:()=>o,v:()=>i});var r=n(69160),a=n(79995);let s=(0,a.createContext)({containers:{},setContainers:()=>{}});function l(e){let{children:t}=e,[n,l]=(0,a.useState)({});return(0,r.jsx)(s.Provider,{value:{containers:n,setContainers:l},children:t})}function i(){return(0,a.useContext)(s)}function o(e){let t=(0,a.useRef)(null),{setContainers:n}=i();return(0,a.useEffect)(()=>(n(n=>({...n,[e]:t.current})),()=>{n(t=>{let{[e]:n,...r}=t;return r})}),[e,n]),t}},95781:(e,t,n)=>{"use strict";n.d(t,{$:()=>o});var r=n(69160),a=n(773),s=n(76665),l=n(57483),i=n(79995);function o(e){let{isCopied:t,size:n,className:o,customIcon:c}=e,[d,u]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{t&&u(!0)},[t]),(0,r.jsx)("span",{"aria-hidden":!0,className:o,children:(0,r.jsx)(s.Iw,{children:t?(0,r.jsx)(s.J5,{children:(0,r.jsx)(a.J,{size:n})},"check"):(0,r.jsx)(s.J5,{preventAnimation:!d,children:c||(0,r.jsx)(l.V,{size:n})},"copy")})})}},85921:(e,t,n)=>{"use strict";n.d(t,{oX:()=>L,TX:()=>S});var r=n(69160),a=n(79995),s=n(18396),l=n(1370),i=n(97077),o=n(30851),c=n(78028),d=n(59700),u=n(773);function m(e){let{children:t,Icon:n,selected:a,className:l,onClick:i}=e;return(0,r.jsxs)(s.z,{className:(0,d.cn)("focus:bg-background flex h-12 items-center justify-between gap-1 px-4 font-medium text-gray-900 shadow-none transition-colors hover:focus:bg-gray-100",a&&"border border-blue-700 bg-blue-100 text-blue-600 hover:border-blue-700 hover:bg-blue-100 hover:brightness-[97%] focus:border-blue-700 focus:bg-blue-100 hover:focus:bg-blue-100 focus-visible:border-blue-700",l),onClick:i,size:"sm",type:"button",variant:"secondary",children:[(0,r.jsxs)("div",{className:"shrink-1 flex items-center gap-2 overflow-hidden",children:[n&&(0,r.jsx)(n,{className:"h-4 w-4 shrink-0"}),(0,r.jsx)("span",{className:"overflow-hidden text-ellipsis",children:t})]}),(0,r.jsx)("div",{className:(0,d.cn)("flex size-4 shrink-0 items-center justify-center rounded-sm border text-white",a&&"border-0 bg-blue-600"),children:a?(0,r.jsx)(u.J,{className:"stroke-background h-2 w-2"}):null})]})}var f=n(40539),h=n(66121),p=n(10556),x=n(20419),g=n(48287),b=n(74693),v=n(76665),j=n(86939);function w(){return(0,r.jsx)(v.YM,{variants:{hover:{y:2,x:-1,rotate:12}},children:(0,r.jsx)(j.S,{"aria-hidden":!0})})}var y=n(24194),k=n(24815),N=n(86032),C=n(14096);function I(){let{data:e,mutate:t}=(0,N.ZP)("downvote-dialog-data",null,{fallbackData:null});return{downvoteDialogState:e,setDownvoteDialogState:t}}function z(e){let{children:t,value:n,reasons:a}=e;return(0,r.jsx)(m,{className:"is-mobile:text-xs",onClick:()=>a.toggle(n),selected:a.has(n),children:t})}function S(){let{activeForkKey:e}=(0,x.RN)(),{downvoteDialogState:t,setDownvoteDialogState:n}=I(),{messageId:u,quote:m}=(0,a.useMemo)(()=>t||{},[t]),{formRef:v,onKeyDown:j}=(0,o.h)(),{chatId:w,messageText:N,promptMessageId:S,userId:L,hasDiffs:E}=(0,g.U)({messageId:u}),[M,R]=(0,a.useState)(""),P=(0,f.A)(),T=(0,k.N)("downvoteDialog"),D=(0,a.useCallback)(()=>{R(""),P.clear(),n(null)},[P,n]),{gm:V}=(0,C.V)(),A=(0,a.useCallback)(async t=>{t.preventDefault();let n=(0,y.w$)(e);if(S&&N&&u&&n)try{(0,i.Am)(T("successToast")),await Promise.all([D(),(0,p.j)("SubmitDownvote",{messageId:u,leafMessageId:n,messageText:JSON.stringify({text:N}),quote:m,reasons:P.values,hasDiffs:E,freeformFeedback:M}),(0,h.Y)({feedback:M,hasDiffs:E,quote:m,reasons:P.values,chatId:w,leafMessageId:n,promptMessageId:S,messageId:u,userId:L,type:"downvote",gitMentionsEnabled:V})])}catch(e){console.error(e),i.Am.error("Failed to send feedback. Please try again later.")}},[S,D,u,N,e,m,E,P.values,M,w,L,T]),_=(0,a.useMemo)(()=>(0,r.jsxs)("form",{className:(0,d.cn)("flex flex-col","is-mobile:gap-3 is-not-mobile:gap-6"),onSubmit:A,ref:v,children:[m&&(0,r.jsxs)("div",{className:(0,d.cn)("bg-muted flex items-center gap-2 text-ellipsis py-3 text-sm text-gray-900","is-mobile:-mx-3 is-mobile:px-3 is-not-mobile:-mx-6 is-not-mobile:px-6"),children:[(0,r.jsx)("div",{className:"w-1 shrink-0 self-stretch rounded-full bg-gray-300"}),(0,r.jsx)("span",{className:"line-clamp-2",children:m})]}),(0,r.jsx)("div",{className:"flex flex-col gap-2",children:(0,r.jsxs)("div",{className:"grid w-full grid-cols-2 items-center justify-start gap-2",children:[(0,r.jsx)(z,{reasons:P,value:"inaccurate",children:T("options.incorrectInformation")}),(0,r.jsx)(z,{reasons:P,value:"off-topic",children:T("options.instructionsIgnored")}),(0,r.jsx)(z,{reasons:P,value:"lazy",children:T("options.beingLazy")}),(0,r.jsx)(z,{reasons:P,value:"style",children:T("options.dontLikeStyle")}),(0,r.jsx)(z,{reasons:P,value:"bad-recommendation",children:T("options.badRecommendation")}),(0,r.jsx)(z,{reasons:P,value:"other",children:T("options.other")})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,r.jsxs)(c.Label,{className:"text-sm font-normal text-gray-500",htmlFor:"downvote-feedback",children:[T("howCanWeImprove")," ",(0,r.jsx)("span",{className:"text-gray-400",children:T("optional")})]}),(0,r.jsx)(l.g,{className:"shadow-none",id:"downvote-feedback",name:"feedback",onChange:e=>R(e.target.value),onKeyDown:j,placeholder:"Your feedback...",rows:3,value:M})]}),(0,r.jsxs)("div",{className:"is-mobile:flex-col-reverse is-not-mobile:flex-row flex w-full items-center justify-end gap-2",children:[(0,r.jsx)(s.z,{className:"is-mobile:w-full",onClick:e=>{e.preventDefault(),D()},size:"sm",variant:"secondary",children:T("cancel")}),(0,r.jsx)(s.z,{className:"is-mobile:w-full",size:"sm",type:"submit",children:T("submit")})]})]}),[A,v,m,P,T,j,M,D]);return(0,r.jsx)(b.Modal,{onClose:D,onOpenChange:e=>{e||D()},open:!!t,children:(0,r.jsxs)("div",{className:"overflow-auto",children:[(0,r.jsxs)(b.ModalHeader,{children:[(0,r.jsx)(b.ModalTitle,{children:T("title")}),(0,r.jsx)(b.ModalDescription,{children:T("description",m)})]}),(0,r.jsx)(b.ModalContent,{children:_})]})})}function L(e){let{variant:t,messageId:n,quoteRef:a,tooltip:l,...i}=e,{messages:o}=(0,x.RN)(),{setDownvoteDialogState:c}=I();function d(){var e;return JSON.stringify(null===(e=o.find(e=>"id"in e&&e.id===n))||void 0===e?void 0:e.content)}return"quote"===t?(0,r.jsx)(s.z,{"aria-label":"Downvote",className:"text-muted-foreground hover:text-foreground rounded-md p-0 text-sm",onClick:()=>{var e,t;(0,p.j)("OpenDownvote",{quote:null==a?void 0:null===(e=a.current)||void 0===e?void 0:e.call(a),messageId:n,messageText:d()}),c({messageId:n,quote:null==a?void 0:null===(t=a.current)||void 0===t?void 0:t.call(a)})},size:"xs",variant:"ghost",children:(0,r.jsx)(w,{"aria-hidden":!0})}):(0,r.jsx)(s.z,{"aria-label":"Downvote Response",onClick:async()=>{(0,p.j)("OpenDownvote",{messageId:n,messageText:d()}),await c({messageId:n})},size:"xs",tooltip:l,variant:"secondary",...i,children:(0,r.jsx)(w,{})})}},37843:(e,t,n)=>{"use strict";n.d(t,{a:()=>h});var r=n(69160),a=n(38402),s=n(63938),l=n(48235),i=n(72409),o=n(47697),c=n(68250),d=n(33618),u=n(53111),m=n(59700);let f=(0,n(68030).l)('<g clip-path="url(#clip0_872_3178)">\n  <path d="M13.7974 2.11525C12.3195 -0.0135593 9.37709 -0.637288 7.26183 0.705085L3.53302 3.09153C2.51607 3.72881 1.81098 4.77288 1.60759 5.95254C1.43132 6.94237 1.58048 7.95932 2.05505 8.84068C1.72963 9.32881 1.51268 9.87119 1.41776 10.4407C1.20082 11.6475 1.48556 12.8949 2.19065 13.8847C3.68217 16.0136 6.61098 16.6373 8.72624 15.2949L12.4551 12.922C13.472 12.2847 14.1771 11.2407 14.3805 10.061C14.5567 9.07119 14.4076 8.05424 13.933 7.17288C14.2584 6.68475 14.4754 6.14237 14.5703 5.57288C14.8008 4.35254 14.5161 3.10508 13.7974 2.11525Z" fill="currentColor"/>\n  <path d="M6.8958 14.0881C5.68902 14.4 4.428 13.9254 3.72292 12.9085C3.28902 12.3119 3.12631 11.5661 3.24834 10.8339C3.27546 10.7119 3.30258 10.6034 3.3297 10.4814L3.3975 10.2644L3.58733 10.4C4.03478 10.7254 4.52292 10.9695 5.05173 11.1322L5.18733 11.1729L5.17377 11.3085C5.16021 11.4983 5.21445 11.7017 5.32292 11.8644C5.53987 12.1763 5.91953 12.3254 6.28563 12.2305C6.36699 12.2034 6.44834 12.1763 6.51614 12.1356L10.2314 9.76271C10.4212 9.64068 10.5433 9.46441 10.5839 9.24746C10.6246 9.03051 10.5704 8.8 10.4483 8.62373C10.2314 8.31186 9.85173 8.17627 9.48563 8.27119C9.40428 8.29831 9.32292 8.32542 9.25512 8.3661L7.83139 9.27458C7.60089 9.42373 7.34326 9.5322 7.07207 9.6C5.86529 9.91187 4.60428 9.43729 3.89919 8.42034C3.47885 7.82373 3.30258 7.07797 3.43817 6.34576C3.56021 5.64068 3.99411 5.00339 4.60428 4.62373L8.33309 2.25085C8.5636 2.1017 8.82123 1.99322 9.09241 1.91186C10.2992 1.6 11.5602 2.07458 12.2653 3.09153C12.6992 3.68814 12.8619 4.4339 12.7399 5.1661C12.7128 5.28814 12.6856 5.39661 12.645 5.51864L12.5772 5.73559L12.3873 5.6C11.9399 5.27458 11.4517 5.03051 10.9229 4.8678L10.7873 4.82712L10.8009 4.69153C10.8144 4.50169 10.7602 4.29831 10.6517 4.13559C10.4348 3.82373 10.0551 3.68814 9.68902 3.78305C9.60767 3.81017 9.52631 3.83729 9.45851 3.87797L5.74326 6.25085C5.55343 6.37288 5.43139 6.54915 5.39072 6.7661C5.35004 6.98305 5.40428 7.21356 5.52631 7.38983C5.74326 7.7017 6.12292 7.83729 6.48902 7.74237C6.57038 7.71525 6.65173 7.68814 6.71953 7.64746L8.14326 6.73898C8.37377 6.58983 8.63139 6.48136 8.90258 6.4C10.1094 6.08814 11.3704 6.56271 12.0755 7.57966C12.5094 8.17627 12.6721 8.92203 12.55 9.65424C12.428 10.3593 11.9941 10.9966 11.3839 11.3763L7.65512 13.7492C7.42461 13.8983 7.16699 14.0068 6.8958 14.0881Z" fill="white"/>\n  </g>\n  <defs>\n  <clipPath id="clip0_872_3178">\n  <rect width="16" height="16" fill="white"/>\n  </clipPath>\n  </defs>');function h(e){let{lang:t}=e,n={className:"size-4"},h={...n,className:(0,m.cn)("[&_path]:fill-current",n.className)};switch(t){case"typescript":return(0,r.jsx)(s.M,{...n});case"javascript":return(0,r.jsx)(a.u,{...n});case"powershell":case"shellscript":return(0,r.jsx)(p,{...n});case"typescriptreact":case"javascriptreact":return(0,r.jsx)(c.E,{...h});case"html":case"xml":return(0,r.jsx)(l.K,{...n});case"svelte":return(0,r.jsx)(f,{...n});case"plaintext":return(0,r.jsx)(o.a,{...n});case"vue":case"vue-html":return(0,r.jsx)(d.T,{...n,...h});case"python":return(0,r.jsx)(u.Z,{...n,...h});default:return(0,r.jsx)(i.$,{...n})}}function p(e){return(0,r.jsxs)("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_3211_43963)",children:[(0,r.jsx)("path",{d:"M4 7L6 5.5L4 4",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M7 9H10",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,r.jsx)("path",{d:"M13.4444 1H2.55556C1.69645 1 1 1.69645 1 2.55556V13.4444C1 14.3036 1.69645 15 2.55556 15H13.4444C14.3036 15 15 14.3036 15 13.4444V2.55556C15 1.69645 14.3036 1 13.4444 1Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_3211_43963",children:(0,r.jsx)("rect",{fill:"white",height:"16",width:"16"})})})]})}},78251:(e,t,n)=>{"use strict";n.d(t,{R:()=>f,s:()=>m});var r=n(69160),a=n(60608),s=n(1969),l=n(92761),i=n(42493),o=n(73248),c=n(79995),d=n(97563);function u(e){let{id:t}=e,n=(0,s._)(t);return(0,r.jsx)("span",{ref:n})}function m(e){let{label:t,idPrefix:n}=e,[a,s]=(0,c.useState)(!1),m=(0,d.dD)(),{refs:f,floatingStyles:h,context:p}=(0,l.YF)({placement:m?"top":"top-start",middleware:[(0,i.uY)({padding:6}),(0,i.cv)(4),(0,i.RR)({padding:6})],open:a,onOpenChange:s,whileElementsMounted:o.Me}),x=(0,l.XI)(p,{handleClose:(0,l.xp)({buffer:1})}),{getReferenceProps:g,getFloatingProps:b}=(0,l.NI)([x]),v="".concat(n).concat(t);return"vercel_knowledge_base"===t?null:(0,r.jsxs)("span",{ref:f.setReference,...g(),className:"-mt-1 ml-0.5 inline-flex size-4 align-text-top",children:[(0,r.jsx)("a",{className:"bg-alpha-200 hover:bg-alpha-400 focus:bg-alpha-400 inline-block size-4 select-none rounded-full text-center font-mono text-[10px] leading-4 text-gray-700 no-underline transition-colors focus:text-black",href:"#def-".concat(v),id:"ref-".concat(v),onBlur:()=>s(!1),onFocus:()=>s(!0),tabIndex:0,children:t}),a?(0,r.jsx)("span",{ref:f.setFloating,style:h,...b(),className:"bg-background shadow-base z-10 select-none rounded-md p-2 text-xs",children:(0,r.jsx)(u,{id:v})}):null]})}function f(e){let{id:t,children:n}=e,{containers:r}=(0,s.v)(),l=r[t];return l?(0,a.createPortal)(n,l):null}},62558:(e,t,n)=>{"use strict";n.d(t,{M:()=>s});var r=n(69160),a=n(59700);function s(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,a.cn)("prose prose-sm prose-gray min-w-0 break-words",t),...n})}},92019:(e,t,n)=>{"use strict";n.d(t,{T:()=>o,g:()=>i});var r=n(69160),a=n(79995),s=n(59700);let l=(0,n(39181).j)("pointer-events-none flex select-none items-center justify-center rounded-sm text-xs font-normal tabular-nums tracking-tight",{variants:{variant:{default:"bg-alpha-white-400 text-white",secondary:"bg-alpha-400 text-gray-900",ghost:"bg-transparent text-gray-900"},size:{default:"h-4 px-1",sm:"h-4 px-1 text-[0.6875rem]"}},defaultVariants:{variant:"default",size:"default"}}),i=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)("kbd",{className:(0,s.cn)("flex items-center gap-1",n),ref:t,...a})});i.displayName="KbdGroup";let o=a.forwardRef((e,t)=>{let{className:n,variant:a,size:i,children:o,...c}=e,d="string"==typeof o&&1===o.length;return(0,r.jsx)("kbd",{className:(0,s.cn)(l({variant:a,size:i,className:n}),d&&"w-4 px-0"),ref:t,...c,children:o})});o.displayName="Kbd"},78028:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Label:()=>c});var r=n(69160),a=n(79995),s=n(66659),l=n(39181),i=n(59700);let o=(0,l.j)("text-sm leading-none text-gray-500 peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.f,{className:(0,i.cn)(o(),n),ref:t,...a})});c.displayName=s.f.displayName},31312:(e,t,n)=>{"use strict";n.d(t,{Bw:()=>x,DI:()=>u,Ph:()=>d,Ql:()=>g,i4:()=>f,ki:()=>m});var r=n(69160),a=n(79995),s=n(66861),l=n(59700),i=n(43968),o=n(55245),c=n(773);let d=s.fC,u=s.ZA,m=s.B4,f=a.forwardRef((e,t)=>{let{className:n,children:a,...o}=e;return(0,r.jsxs)(s.xz,{className:(0,l.cn)("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus:ring-ring flex h-10 w-full items-center justify-between rounded-md border px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),ref:t,...o,children:[a,(0,r.jsx)(s.JO,{asChild:!0,children:(0,r.jsx)(i._,{className:"h-4 w-7 translate-y-[0.5px] text-gray-500 [&_path]:fill-gray-500"})})]})});f.displayName=s.xz.displayName;let h=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.u_,{className:(0,l.cn)("flex cursor-default items-center justify-center py-1",n),ref:t,...a,children:(0,r.jsx)(o.K,{className:"h-4 w-4"})})});h.displayName=s.u_.displayName;let p=a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.$G,{className:(0,l.cn)("flex cursor-default items-center justify-center py-1",n),ref:t,...a,children:(0,r.jsx)(i._,{className:"h-4 w-4"})})});p.displayName=s.$G.displayName;let x=a.forwardRef((e,t)=>{let{className:n,children:a,position:i="popper",...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsxs)(s.VY,{className:(0,l.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:i,ref:t,...o,children:[(0,r.jsx)(h,{}),(0,r.jsx)(s.l_,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),(0,r.jsx)(p,{})]})})});x.displayName=s.VY.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.__,{className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",n),ref:t,...a})}).displayName=s.__.displayName;let g=a.forwardRef((e,t)=>{let{className:n,children:a,icon:i,iconOnRight:o,...d}=e;return(0,r.jsxs)(s.ck,{className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),ref:t,...d,children:[(0,r.jsx)("span",{className:(0,l.cn)("absolute flex h-3.5 w-3.5 items-center justify-center",o?"right-2":"left-2"),children:(0,r.jsx)(s.wU,{children:i||(0,r.jsx)(c.J,{className:"h-3 w-3"})})}),(0,r.jsx)(s.eT,{children:a})]})});g.displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:n,children:a,...i}=e;return(0,r.jsxs)(s.ck,{ref:t,className:(0,l.cn)("focus:bg-accent focus:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...i,children:[(0,r.jsx)("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(s.wU,{children:(0,r.jsx)(c.J,{className:"h-4 w-4"})})}),(0,r.jsx)(s.eT,{children:a})]})}).displayName=s.ck.displayName,a.forwardRef((e,t)=>{let{className:n,...a}=e;return(0,r.jsx)(s.Z0,{className:(0,l.cn)("bg-muted -mx-1 my-1 h-px",n),ref:t,...a})}).displayName=s.Z0.displayName},1370:(e,t,n)=>{"use strict";n.d(t,{g:()=>i});var r=n(69160),a=n(79995),s=n(59700),l=n(86180);let i=a.forwardRef((e,t)=>{let{className:n,asChild:a=!1,...i}=e,o=a?l.g7:"textarea";return(0,r.jsx)(o,{className:(0,s.cn)("focus-visible:border-alpha-600 disabled:border-alpha-300 bg-background inline-flex min-h-20 w-full shrink-0 rounded-lg border p-3 text-sm outline-none transition-all file:border-0 placeholder:text-gray-400 disabled:pointer-events-none disabled:cursor-not-allowed disabled:bg-gray-100 disabled:text-gray-400 disabled:ring-0",n),ref:t,...i})});i.displayName="Textarea"},99706:(e,t,n)=>{"use strict";n.d(t,{OK:()=>m,l2:()=>d,sd:()=>u,w:()=>f,zi:()=>c});var r=n(12885),a=n(24194),s=n(20419),l=n(79995),i=n(86032),o=n(58604);function c(){let{chatId:e}=(0,s.ae)(),{data:t}=(0,i.ZP)(["active-block",e]);return t}function d(){let{chatId:e}=(0,s.ae)(),{data:t}=(0,i.ZP)(["block-view",e]);return!!t}function u(){let{chatId:e}=(0,s.ae)(),{mutate:t}=(0,o.kY)();return n=>{t(["active-block",e],null!=n?n:null,!1)}}function m(){let{chatId:e}=(0,s.ae)(),{mutate:t}=(0,o.kY)();return(n,r)=>{n?t(["active-block",e],r,!1):t(["active-block",e],null,!1),t(["block-view",e],n,!1)}}function f(){let{messages:e}=(0,s.RN)(),t=c(),n=m();return(0,l.useCallback)((s,l)=>{if(!t)return;let i=()=>{let t;if(!l)return void n(!1);let a=-1;for(let n of e.map(e=>{var t;return(0,r.to)(null!==(t=e.content)&&void 0!==t?t:"",e.id)}).flat()){if(!n)continue;let e=l.findIndex(e=>e===n.messageId);e>-1&&e>=a&&(a=e,t=n)}if(!t){n(!1);return}n(!0,t)};if(!s){n(!1);return}if(s===t.messageId){i();return}new Set((0,a.$j)(e.map(e=>({...e,messageId:e.id})),s)).has(t.messageId)&&i()},[t,e,n])}},12312:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var r=n(86032);function a(){let{data:e}=(0,r.ZP)("block:is-published");return{isPublished:e||!1}}},92321:(e,t,n)=>{"use strict";n.d(t,{J:()=>o});var r=n(20419),a=n(86032),s=n(79995),l=n(69745),i=n(97077);function o(){let{chatId:e}=(0,r.ae)(),{data:t,mutate:n}=(0,a.ZP)(["blocks-shared",e],{fallbackData:new Map});return{getBlockShared:(0,s.useCallback)(e=>{var n;return null!==(n=null==t?void 0:t.get(e))&&void 0!==n&&n},[t]),setBlockShared:(0,s.useCallback)((e,r)=>{n(new Map(null==t?void 0:t.set(e,r)));try{(0,l.r)({blockId:e,shared:r})}catch(e){(0,i.Am)("Failed to update block publish status")}},[t,n]),updateBlockInSharedMap:(0,s.useCallback)((e,r)=>{n(new Map(null==t?void 0:t.set(e,r)))},[t,n])}}},76339:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var r=n(79995);function a(e){let{timeout:t=2e3}=e,[n,a]=r.useState(!1);return{isCopied:n,copyToClipboard:async e=>{"writeText"in navigator.clipboard&&e&&(await navigator.clipboard.writeText(e),a(!0),setTimeout(()=>{a(!1)},t))}}}},30851:(e,t,n)=>{"use strict";n.d(t,{h:()=>s});var r=n(79995),a=n(67019);function s(e){return{formRef:(0,r.useRef)(null),onKeyDown:(0,r.useCallback)(t=>{let n=t.currentTarget.value.trim(),r=""===n&&(null==e?void 0:e.localFileInfos)&&e.localFileInfos.length>0;if("Enter"===t.key&&!t.shiftKey&&!t.nativeEvent.isComposing){if(a.G6&&a.nI&&229===t.keyCode)return;t.preventDefault(),r?e.submitMessage():n.length>0&&(null==e||e.submitMessage())}},[e])}}},40539:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(79995);function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,r.useState)(new Set(e));return{values:[...t],has:e=>t.has(e),toggle:e=>n(t=>new Set(t.delete(e)?t:t.add(e))),clear:()=>n(new Set)}}},736:(e,t,n)=>{"use strict";n.d(t,{V:()=>r,h:()=>a});let r={messages:[],isLoading:!1,activeForkKey:void 0,isContinuing:!1,isStreaming:!1,isAuthor:!1},a={title:"",isEmpty:!0,isNew:!1,authorId:"",ownerId:""}},92234:(e,t,n)=>{"use strict";n.d(t,{l:()=>s,o:()=>l});let r=["mermaid","math","csv","toolcall","local"],a=new Map([["mermaid","mermaid"],["math","math"],["csv","csv"],["toolcall","toolcall"],["local","local"],["abap","abap"],["astro","astro"],["bat","bat"],["cmd","bat"],["bib","bibtex"],["bibtex","bibtex"],["clj","clojure"],["cljs","clojure"],["cljc","clojure"],["clojure","clojure"],["coffee","coffeescript"],["coffeescript","coffeescript"],["c","c"],["h","c"],["cpp","cpp"],["cc","cpp"],["cxx","cpp"],["hpp","cpp"],["hh","cpp"],["hxx","cpp"],["cs","csharp"],["csharp","csharp"],["docker-composeyml","dockercompose"],["docker-composeyaml","dockercompose"],["dockercompose","dockercompose"],["css","css"],["cu","cuda-cpp"],["cuh","cuda-cpp"],["cuda-cpp","cuda-cpp"],["d","d"],["pas","pascal"],["pascal","pascal"],["diff","diff"],["patch","diff"],["dockerfile","dockerfile"],["erl","erlang"],["hrl","erlang"],["erlang","erlang"],["fs","fsharp"],["fsi","fsharp"],["fsx","fsharp"],["fsharp","fsharp"],["gitcommit","git-commit"],["git-commit","git-commit"],["gitrebase","git-rebase"],["git-rebase","git-rebase"],["go","go"],["groovy","groovy"],["gvy","groovy"],["gy","groovy"],["gsh","groovy"],["hbs","handlebars"],["handlebars","handlebars"],["haml","haml"],["hs","haskell"],["lhs","haskell"],["haskell","haskell"],["html","html"],["htm","html"],["ini","ini"],["java","java"],["mjs","javascript"],["cjs","javascript"],["js","javascript"],["javascript","javascript"],["jsx","javascriptreact"],["javascriptreact","javascriptreact"],["json","json"],["jsonc","jsonc"],["jl","julia"],["julia","julia"],["kt","kotlin"],["kts","kotlin"],["kotlin","kotlin"],["tex","latex"],["latex","latex"],["less","less"],["lua","lua"],["makefile","makefile"],["mk","makefile"],["md","markdown"],["mdx","markdown"],["markdown","markdown"],["m","objective-c"],["objective-c","objective-c"],["mm","objective-cpp"],["objective-cpp","objective-cpp"],["ml","ocaml"],["mli","ocaml"],["ocaml","ocaml"],["pl","perl"],["pm","perl"],["t","perl"],["perl","perl"],["p6","perl6"],["pl6","perl6"],["pm6","perl6"],["perl6","perl6"],["php","php"],["txt","plaintext"],["plaintext","plaintext"],["ps1","powershell"],["psm1","powershell"],["psd1","powershell"],["powershell","powershell"],["jade","jade"],["pug","pug"],["py","python"],["rpy","python"],["pyw","python"],["cpy","python"],["python","python"],["r","r"],["cshtml","razor"],["razor","razor"],["rb","ruby"],["rbx","ruby"],["rjs","ruby"],["gemspec","ruby"],["ruby","ruby"],["rs","rust"],["rust","rust"],["scss","scss"],["sass","sass"],["shader","shaderlab"],["shaderlab","shaderlab"],["sh","shellscript"],["bash","shellscript"],["zsh","shellscript"],["shellscript","shellscript"],["slim","slim"],["sql","sql"],["styl","stylus"],["stylus","stylus"],["svelte","svelte"],["swift","swift"],["ts","typescript"],["typescript","typescript"],["terraform","terraform"],["tf","terraform"],["hcl","terraform"],["tsx","typescriptreact"],["typescriptreact","typescriptreact"],["tex","tex"],["vb","vb"],["vue","vue"],["vue-html","vue-html"],["svg","xml"],["xml","xml"],["xsl","xsl"],["xslt","xsl"],["yaml","yaml"],["yml","yaml"]]);function s(e){var t;return null!==(t=a.get(e))&&void 0!==t?t:"plaintext"}function l(e){var t;if(!e)return"plaintext";let n=null!==(t=a.get(e))&&void 0!==t?t:"plaintext";return r.includes(n)?"plaintext":n}},12885:(e,t,n)=>{"use strict";n.d(t,{Th:()=>ef,to:()=>ex,_9:()=>eb,bm:()=>eg});var r=n(69160),a=n(79995);n(61744);var s=n(18396),l=n(59700),i=n(10031),o=n(97928);function c(e){return(0,r.jsx)("div",{className:"bg-muted my-4 space-y-4 rounded-lg border px-4 pb-6 pt-2",children:e.children})}function d(e){let{value:t,selected:n,onClick:a,children:s,index:i}=e;return(0,r.jsxs)("label",{className:"flex w-full cursor-pointer flex-col",children:[(0,r.jsx)("input",{className:"size-0",defaultChecked:n,name:"answer",onClick:a,type:"radio",value:t}),(0,r.jsxs)("span",{className:(0,l.cn)("bg-background flex items-center justify-start gap-3 px-4 py-3 transition-colors",n&&"bg-blue-100"),children:[(0,r.jsx)("span",{className:(0,l.cn)("flex size-5 select-none items-center justify-center rounded-full bg-blue-100 text-center text-xs font-semibold text-blue-800 transition-colors",n&&"bg-blue-400 text-white"),children:String.fromCharCode(65+i)}),s]})]})}function u(e){let{correct:t,selected:n,className:a}=e;return t||n?(0,r.jsx)("span",{className:(0,l.cn)("inline-block size-6 shrink-0 rounded-full p-1 align-middle",t?"bg-blue-100 text-blue-600":"bg-red-100 text-red-500",a),children:t?(0,r.jsx)(i.f,{}):(0,r.jsx)(o.v,{})}):null}function m(e){let{answer:t,correctAnswer:n}=e;return(0,r.jsxs)("span",{className:(0,l.cn)("animate-slideDownAndFade flex select-none items-center justify-center gap-1 rounded-full py-1 pl-3 pr-5",t===n&&"bg-blue-100 text-blue-600",t&&t!==n&&"bg-red-100 text-red-500"),children:[void 0!==t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{correct:t===n,selected:!0})," "]}),void 0===t?(0,r.jsxs)(r.Fragment,{children:["The correct answer is: ",(0,r.jsx)("strong",{children:n})]}):t===n?(0,r.jsx)("span",{className:"font-bold text-blue-600",children:"Correct"}):(0,r.jsx)("span",{className:"font-bold text-red-500",children:"Incorrect"})]})}function f(e){let{answers:t,correctAnswer:n,question:l}=e,[i,o]=(0,a.useState)(null),[f,h]=(0,a.useState)(!1),[p,x]=(0,a.useState)(!1);return(0,r.jsxs)(c,{children:[(0,r.jsx)("p",{className:"text-md px-4 text-center font-semibold md:px-8 lg:px-12",children:l}),(0,r.jsx)("div",{className:"mx-0 flex flex-col divide-y overflow-hidden rounded-md border md:mx-8 lg:mx-12",children:t.map((e,t)=>(0,r.jsxs)(d,{index:t,onClick:()=>{p||o(e)},selected:e===i,value:e,children:[(0,r.jsx)("span",{className:"flex-1",children:e}),f?(0,r.jsx)(u,{className:"animate-slideDownAndFade ml-2",correct:e===n,selected:e===i}):null]},e))}),(0,r.jsx)("div",{className:"flex justify-center",children:f&&null!==i?(0,r.jsx)(m,{answer:i,correctAnswer:n}):(0,r.jsx)(s.z,{className:"h-9 select-none",disabled:null===i,onClick:()=>{h(!0),x(!0)},size:"sm",children:"Check answer"})})]})}var h=n(23411);function p(e){let{children:t,className:n,...a}=e;return(0,r.jsx)("div",{className:(0,h.Z)("steps mb-12 ml-2 border-l border-gray-200 pl-5 sm:ml-4 sm:pl-6","[counter-reset:step]",n),...a,children:t})}n(29553);var x=n(992);function g(e){let{title:t}=e;return(0,r.jsxs)("div",{className:"rounded-lg border border-gray-100 p-4 shadow-sm",children:[(0,r.jsx)("p",{className:"mb-2 mt-0 font-medium text-gray-600",children:t}),(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"h-4 w-3/4 rounded bg-gray-200"}),(0,r.jsx)("div",{className:"mt-2 h-4 w-1/2 rounded bg-gray-200"}),(0,r.jsx)("div",{className:"mt-2 h-4 w-3/4 rounded bg-gray-200"})]})]})}var b=n(29301);function v(e){let{language:t,children:n}=e;return(0,r.jsx)(b.d,{allowCopyCode:!0,allowDownloadCode:!1,caller:"inline",className:"not-prose mb-6 max-h-[500px] md:max-h-[700px]",headerClassName:"bg-muted",language:t,showLineNumbers:!1,value:n})}var j=n(99706),w=n(10556),y=n(37843),k=n(55238),N=n(36762),C=n(87468),I=n(92321),z=n(24815),S=n(88375),L=n(33831),E=n(66694);function M(e){let{children:t,className:n}=e;return(0,r.jsx)("div",{className:(0,l.cn)("bg-gray-150 flex h-5 items-center gap-1 rounded-md px-1 text-[12px] text-gray-600",n),children:t})}function R(e){let{type:t,blockId:n,messageId:s,...i}=e,o=(0,j.l2)(),c=(0,j.zi)(),d=(0,j.OK)(),{currentBlockIndex:u}=(0,k.useBlockHistory)({blockId:n}),{getBlockShared:m}=(0,I.J)(),{user:f}=(0,S.a)(),h=(0,z.N)("blockPreview"),p=o&&(null==c?void 0:c.id)===n,x="Untitled",g=t;i.meta.project&&(x=i.meta.project),i.meta.file&&(g=i.meta.file||t),"local"===t&&(x=i.meta.title);let b=(0,a.useCallback)(()=>{(0,w.j)("ClickBlockPreview",{blockId:n}),d(!0,{id:n,meta:i.meta,diffInfo:i.diffInfo,remoteInfo:i.remoteInfo,messageId:s,type:t,language:i.language,source:i.source,resultId:i.resultId,closed:!!i.closed,hasSourceBeenEdited:!!(null==c?void 0:c.hasSourceBeenEdited)})},[n,d,i.meta,i.language,i.source,i.diffInfo,i.remoteInfo,i.resultId,i.closed,s,t,null==c?void 0:c.hasSourceBeenEdited]),v=(0,a.useMemo)(()=>m(n),[n,m]),R="local"===t?(0,r.jsx)(C.c,{className:"size-4 [&_path]:fill-current"}):(0,r.jsx)(y.a,{lang:"language"in i?i.language:"plaintext"}),P=(0,a.useCallback)(()=>{if(!p){b();let e=new URL(window.location.href),t=new URLSearchParams(e.search);t.delete("b"),e.search=t.toString(),window.history.replaceState({},"",e.toString());return}d(!1)},[p,b,d]),T=(0,a.useMemo)(()=>"local"===t?(0,L.c)(i.source):[],[i.source,t]);return(0,r.jsxs)("button",{className:(0,l.cn)("not-prose bg-background flex w-full max-w-full select-none items-start justify-between gap-2 rounded-[10px] border p-1.5 transition-all duration-200 ease-in-out hover:brightness-[97%] active:brightness-95 md:w-[400px]",p?"ring-alpha-400 border-gray-500 ring-2":"border-gray-200"),onClick:P,children:[(0,r.jsx)("div",{className:"flex size-10 shrink-0 items-center justify-center overflow-hidden rounded-sm bg-gray-100 px-3 text-gray-500 transition-all duration-200 ease-in-out",children:R}),(0,r.jsx)("div",{className:"flex w-full min-w-0 flex-row items-center justify-between",children:(0,r.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col items-start leading-5",children:[(0,r.jsxs)("div",{className:"my-0 flex w-full min-w-0 max-w-full items-center justify-between gap-2 text-sm font-medium text-gray-900",children:[(0,r.jsx)("div",{className:"min-w-0 shrink truncate",children:x}),(0,r.jsxs)("div",{className:"flex shrink-0 gap-1",children:[v?(0,r.jsxs)(M,{children:[(0,r.jsx)(N.T,{size:12})," ",h("published")]}):null,(0,r.jsxs)(M,{className:"font-mono",children:["v",u+1]}),"local"===t?(0,r.jsx)(M,{className:"bg-lime-100 dark:bg-lime-900",children:"LOCAL"}):null,(null==f?void 0:f.isAdminMode)&&void 0!==i.diffInfo?(0,r.jsx)(M,{className:"bg-pink-100 dark:bg-pink-900",children:"DIFF"}):null]})]}),"local"!==t?(0,r.jsxs)("p",{className:"my-0 max-w-full truncate text-sm text-gray-500 ",children:[g,(null==c?void 0:c.hasSourceBeenEdited)?(0,r.jsx)("span",{children:" (edited)"}):null]}):(0,r.jsx)("ul",{className:"my-0 w-full max-w-full truncate text-left text-gray-500",children:T.map((e,t)=>(0,r.jsxs)("li",{className:"flex items-center gap-1 truncate",children:[e.meta.file,t!==T.length-1||i.closed?null:(0,r.jsx)("span",{children:(0,r.jsx)(E.$,{size:14})})]},t))})]})})]})}var P=n(92761),T=n(42493),D=n(73248),V=n(95148),A=n(2973),_=n(62558),O=n(26548),F=n(85921),B=n(76811),H=n(92019);let Z=(0,a.createContext)({}),K="function"==typeof Intl.Segmenter?new Intl.Segmenter("en",{granularity:"word"}):null,q=window.matchMedia("(prefers-reduced-motion: reduce)").matches;function J(e){let{streaming:t,readonly:n,children:l,messageId:i}=e,o=(0,z.N)("segmenterProvider"),{setQuote:c}=(0,B.B1)(),d=(0,a.useState)(()=>{let e=new Map,t=new Map,n=new Set,r=new Map,a=!1;return(s,l,i,o)=>{l.current&&(e.set(s,l),t.set(s,i),n.add(s),r.set(s,o),a||(a=!0,setTimeout(c,8)));async function c(){if(0===n.size){a=!1;return}let s=n.values().next().value;for(let e of n)e<s&&(s=e);n.delete(s);let l=e.get(s),i=t.get(s),o=r.get(s);if(l&&l.current&&(null==o||o(),i&&i.current)){let e=l.current.textContent;i.current.startsWith(e)||(l.current.textContent="",e="");let t=function(e){let t=[];if(K)for(let{segment:n}of K.segment(e))t.push(n);else{let n=e.split(" ");for(let e=0;e<n.length;e++)e>0&&t.push(" "),t.push(n[e])}return t}(i.current.slice(e.length));for(let n=0;n<t.length&&(e+=t[n],l.current);n++)l.current.textContent=e," "!==t[n]&&await new Promise(e=>setTimeout(e,8))}setTimeout(c,8)}}})[0],u=!0!==n,m=(0,a.useRef)(null),[f,h]=(0,a.useState)(null),p=(0,V.s)(),{refs:x,floatingStyles:g}=(0,P.YF)({placement:p?"bottom":"top",middleware:[(0,T.cv)(12),(0,T.Qo)(),(0,T.RR)({padding:6})],whileElementsMounted:D.Me}),b=(0,a.useRef)(()=>"");(0,a.useEffect)(()=>{let e=!1,t=()=>{var t;e=!1;let n=window.getSelection();if(null===n||!n.rangeCount){h(null);return}let r=n.getRangeAt(0);if(r.collapsed){h(null);return}let a=null===(t=m.current)||void 0===t?void 0:t.contains(r.commonAncestorContainer),s=m.current;if(!a){let e=!1,t=r.commonAncestorContainer;if(t instanceof HTMLElement){let n=t.closest('[data-seg="code-root"]');n&&n instanceof HTMLElement&&(e=!0,s=n)}if(!e){h(null);return}}for(;0===r.endOffset;)r.setEndBefore(r.endContainer);u&&x.setReference({getBoundingClientRect:()=>r.getBoundingClientRect(),getClientRects:()=>{let e=r.getClientRects(),t=[];t.item=e=>t[e];for(let n=0;n<e.length;n++){let r=e[n];r.width>.1&&r.height>.1&&t.push(r)}return t}}),e=!0,b.current=function(){var e;let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=r.cloneContents();return(0,A.u)(n,r.commonAncestorContainer,r.startOffset>0,(null===(e=r.endContainer.textContent)||void 0===e?void 0:e.length)!==r.endOffset,t)},u&&h(s)};function n(t){if(!e||!t.clipboardData)return;let n=b.current(!1);t.clipboardData.setData("text/markdown",n),t.clipboardData.setData("text/plain",n),t.preventDefault()}return document.addEventListener("selectionchange",t),document.addEventListener("keyup",t),document.addEventListener("copy",n),()=>{document.removeEventListener("selectionchange",t),document.removeEventListener("keyup",t),document.removeEventListener("copy",n)}},[x,u]);let[v,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=m.current;if(!e)return;let t=e=>{var t;null!==(t=x.floating.current)&&void 0!==t&&t.contains(e.target)||j(!0)},n=()=>{j(!1)};return e.addEventListener("pointerdown",t),e.addEventListener("pointerup",n),e.addEventListener("pointerleave",n),()=>{e.removeEventListener("pointerdown",t),e.removeEventListener("pointerup",n),e.removeEventListener("pointerleave",n)}},[x.floating]),(0,O.OR)("keydown",e=>{var t;"q"===e.key&&f&&(c(b.current()),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),e.stopPropagation(),e.preventDefault())});let w=(0,a.useMemo)(()=>({animate:t?d:void 0}),[t,d]);return(0,r.jsxs)("div",{ref:m,children:[f&&(0,r.jsx)(P.ll,{root:f,children:(0,r.jsxs)("div",{className:"bg-background shadow-base-expand absolute left-0 top-0 z-50 flex select-none items-center gap-1 rounded-lg p-1","data-quote-button":!0,ref:x.setFloating,style:{...g,pointerEvents:v?"none":void 0},children:[(0,r.jsxs)(s.z,{className:"hover:text-foreground rounded-md px-0.5 py-0 text-sm text-gray-500",onClick:()=>{var e;c(b.current()),null===(e=window.getSelection())||void 0===e||e.removeAllRanges()},size:"xs",variant:"ghost",children:[o("quote"),(0,r.jsx)(H.T,{variant:"secondary",children:"Q"})]}),(0,r.jsx)("div",{className:"bg-alpha-400 h-5 w-px"}),(0,r.jsx)(F.oX,{className:"text-gray-500",messageId:i,quoteRef:b,tooltip:"Downvote Selection",variant:"quote"})]})}),(0,r.jsx)(_.M,{"data-seg":"root",children:(0,r.jsx)(Z.Provider,{value:w,children:l})})]})}var $=n(50698),Y=n(78251),U=n(12117),G=n(37977),W=n(15214),X=n(23324),Q=n(85421);let ee=Q.fC,et=Q.wy,en=Q.Fw;var er=n(43968),ea=n(23680);function es(e){let{name:t,files:n=[],animated:s=!0}=e,[l,i]=(0,a.useState)(s),[o,c]=(0,a.useState)(n.length<2);(0,a.useEffect)(()=>{if(!s){i(!1);return}let e=setTimeout(()=>i(!1),250);return()=>clearTimeout(e)},[n,s]);let d=s?"animate-shimmer translate-y-px bg-[length:800%_100%] bg-clip-text text-sm text-transparent":void 0,u=s?{backgroundImage:"linear-gradient(90deg,rgb(161 161 170) 0%,rgb(161 161 170) 35%,rgb(212 212 216) 50%,rgb(161 161 170) 65%,rgb(161 161 170) 100%)"}:void 0;return(0,r.jsx)("div",{className:"font-mono text-gray-500",children:(0,r.jsxs)(ee,{open:o,onOpenChange:c,children:[(0,r.jsx)(et,{asChild:!0,children:(0,r.jsx)("button",{className:(0,X.cn)(d,"mb-2 flex cursor-pointer items-center"),style:u,children:l?t?(0,r.jsxs)(r.Fragment,{children:["Scanning ",n.length," files inside /",t,"..."]}):(0,r.jsxs)(r.Fragment,{children:["Reading ",n.length," files..."]}):(0,r.jsxs)(r.Fragment,{children:[t?(0,r.jsxs)(r.Fragment,{children:["Scanned ",n.length," files inside ",t," "]}):(0,r.jsxs)(r.Fragment,{children:["Read ",n.length," files "]}),o?(0,r.jsx)(er._,{className:"ml-1 h-3 w-3"}):(0,r.jsx)(ea._,{className:"ml-1 h-3 w-3"})]})})}),(0,r.jsx)(en,{className:"border-l border-gray-200",children:(0,r.jsx)(W.M,{children:(0,r.jsx)("ul",{className:"m-0 flex list-none flex-col gap-2 p-0",children:n.map(e=>(0,r.jsx)("li",{className:"m-0 list-none p-0 text-sm",children:e},e))})})})]})})}let el=a.memo(e=>{let{source:t,streaming:n}=e,a=t.replace(/[^]*Tool call result:\n/,""),s=t.replace(/\nTool call result:[^]+/,""),l=null,i=null;try{l=JSON.parse(s),i=JSON.parse(a)}catch(e){}return i&&((null==l?void 0:l.type)==="read_dir"||(null==l?void 0:l.type)==="read_file")?(0,r.jsx)(es,{name:"read_dir"===l.type?l.dir:void 0,files:"read_dir"===l.type?i.files:Object.keys(i.content||{}),animated:n||!1}):(0,r.jsx)("p",{className:"inline-flex cursor-pointer rounded bg-cyan-600/10 px-1.5 py-0.5 text-sm text-cyan-700",children:(0,r.jsxs)("details",{children:[(0,r.jsxs)("summary",{className:"inline-flex items-center gap-2",children:[(0,r.jsx)(G.Z,{className:"h-3.5 w-3.5"}),s]}),(0,r.jsx)("div",{className:"mb-1 rounded bg-cyan-800/10 p-1 font-mono text-xs",children:a})]})})});el.displayName="Toolcall";let ei=(0,x.default)(()=>Promise.all([n.e(2991),n.e(3674)]).then(n.t.bind(n,53674,23)).then(e=>e.InlineMath)),eo=(0,x.default)(()=>Promise.all([n.e(2991),n.e(3674)]).then(n.t.bind(n,53674,23)).then(e=>e.BlockMath)),ec=(0,x.default)(()=>Promise.all([n.e(5367),n.e(1385)]).then(n.bind(n,1385)).then(e=>e.Mermaid),{loadableGenerated:{webpack:()=>[1385]}}),ed=(0,x.default)(()=>Promise.all([n.e(4816),n.e(882),n.e(9356)]).then(n.bind(n,39356)).then(e=>e.Table),{loadableGenerated:{webpack:()=>[39356]}}),eu=String.fromCharCode(65535);function em(e,t){if(void 0===e)return e;let n=e+"\0";for(;;)if(t>=65535)n+=eu,t-=65535;else{n+=String.fromCharCode(t+1);break}return n}let ef=a.memo(function(e){let t,{messageId:n,role:a,streaming:s,rows:l}=e,{authorId:i}=(0,B.xN)(),{user:o}=(0,S.a)(),c=!1,d=[],u=l.map((e,t)=>{let[l,i]=e,o=em("",t);return 0===l?(c=!0,(0,r.jsx)(eh,{data:i,id:o,messageId:n,streaming:s},o)):(1===l&&"assistant"===a&&i.context&&Array.isArray(i.context)&&i.context.length>0&&(d=i.context),null)});if(!c){if(0===d.length)return null;t=(0,r.jsx)(U.dS,{urls:d.map(e=>{let{url:t}=e;return t})})}let m=(0,r.jsxs)(r.Fragment,{children:[t,u]});return"assistant"===a?(0,r.jsx)(J,{messageId:n,readonly:!!i&&(null==o?void 0:o.id)!==i,streaming:s,children:m}):m});function eh(e){let{data:t,id:n,messageId:a,streaming:s}=e;return t.map((e,l)=>{let i=em(n,l);return(0,r.jsx)(ep,{data:e,id:i,isLast:l===t.length-1,index:l,messageId:a,streaming:s},i)})}function ep(e){let{data:t,id:n,index:s,messageId:l,isLast:i,streaming:o}=e,c=function(e){let{id:t,content:n,type:r,props:s}=e,{animate:l}=(0,a.use)(Z),i=(0,a.useRef)(null),o=(0,a.useRef)(n),[c,d]=(0,a.useState)(!1),u=(0,a.useId)();(0,a.useEffect)(()=>(A.n.set(u,{type:r,props:s}),()=>{A.n.delete(u)}));let m={"data-seg":u};return((0,a.useEffect)(()=>{if(q){let e=i.current;if(!e)return;e.style.transition="",d(!0),"string"==typeof n&&(e.textContent=n);return}if(o.current=n,!l||void 0===t)return;let e=setTimeout(()=>{l(t,i,o,()=>d(!0))},20);return()=>clearTimeout(e)},[l,t,n]),l&&void 0!==t)?(m.style={opacity:c?1:0,transition:"opacity .5s ease"},m.ref=i,"string"==typeof n&&(m.children="\xa0")):"string"==typeof n&&(m.children=n),{elementProps:m}}({id:n,content:"string"==typeof t?t:void 0,type:"string"==typeof t?"text":t[0],props:"string"==typeof t?{}:t[1]}),d="string"!=typeof t&&"Codeblock"===t[0]&&t[1].blockId?t[1].source:void 0;if("string"==typeof t)return t;let[u,m,...h]=t;if(void 0===u)return null;let x=(0,r.jsx)(eh,{data:h,id:n,messageId:l});switch(u){case"text":return(0,r.jsx)("span",{...c.elementProps,children:x});case"span":case"p":case"blockquote":case"strong":case"em":case"del":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"ul":case"ol":case"li":return(0,r.jsx)(u,{...c.elementProps,...m,children:x});case"code":return(0,r.jsx)("code",{...c.elementProps,className:"rounded-[0.375rem] border bg-gray-100 px-[0.25rem] py-[0.15rem] font-mono text-xs font-normal before:hidden after:hidden",...m,children:x});case"a":let b=m.href;if("string"==typeof b&&b.startsWith("/"))return(0,r.jsx)("span",{...c.elementProps,children:x});return(0,r.jsxs)("a",{...c.elementProps,className:"font-normal text-blue-600 no-underline decoration-from-font underline-offset-2 transition-colors hover:text-blue-600",href:m.href||"#",rel:"noopener noreferrer",target:"_blank",children:[x,(0,r.jsx)($.R,{className:"mb-0.5 ml-0.5 inline h-3 w-3"})]});case"img":return(0,r.jsx)("img",{...c.elementProps,...m});case"hr":return(0,r.jsx)("hr",{...c.elementProps});case"table":return(0,r.jsx)("table",{...c.elementProps,className:"table-fixed",children:x});case"tr":return(0,r.jsx)("tr",{...c.elementProps,children:x});case"td":return(0,r.jsx)("td",{...c.elementProps,children:x});case"th":return(0,r.jsx)("th",{...c.elementProps,children:x});case"thead":return(0,r.jsx)("thead",{...c.elementProps,children:x});case"tbody":return(0,r.jsx)("tbody",{...c.elementProps,children:x});case"Codeblock":let j=d||h.join("");if(m.blockId&&m.meta.type)return(0,r.jsx)("div",{className:"[&:not(:last-child)]:mb-3",...c.elementProps,children:(0,r.jsx)(R,{blockId:m.blockId,closed:m.closed,language:m.lang,diffInfo:m.diffInfo,remoteInfo:m.remoteInfo,messageId:l,meta:m.meta,resultId:m.resultId,source:j,type:m.meta.type},m.blockId)});if(!j)return(0,r.jsx)("div",{...c.elementProps});switch(m.lang){case"mermaid":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(a.Suspense,{fallback:null,children:(0,r.jsx)(ec,{source:j,title:m.meta.title})})});case"math":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(eo,{math:j})});case"csv":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(a.Suspense,{fallback:(0,r.jsx)(g,{title:"Loading table..."}),children:(0,r.jsx)(ed,{source:j})})});case"toolcall":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(el,{source:j,streaming:o||!1})});default:return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(v,{language:m.lang,children:j})})}case"InlineMath":return(0,r.jsx)("span",{...c.elementProps,children:(0,r.jsx)(ei,{math:h.join("")})});case"Math":return(0,r.jsx)("span",{...c.elementProps,children:(0,r.jsx)(eo,{math:h.join("")})});case"LinearProcessFlow":case"Steps":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(p,{children:x})});case"Thinking":case"DevThinking":case"V0Info":case"Solution":case"footnoteDefinition":default:return null;case"Quiz":return(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsx)(f,{...m,children:x})});case"Spinner":return i?(0,r.jsx)("div",{...c.elementProps,children:(0,r.jsxs)("div",{className:"flex items-center justify-start gap-2",children:[s>0?(0,r.jsx)(E.$,{}):null,(0,r.jsx)("span",{className:"animate-pulse",children:m.message||"Generating..."})]})}):null;case"MathInstructions":case"MathBlock":return(0,r.jsx)("div",{...c.elementProps,children:x});case"footnoteReference":return(0,r.jsx)("span",{...c.elementProps,children:(0,r.jsx)(Y.s,{idPrefix:"cite-".concat(l,"-"),label:m.label})})}}function ex(e,t){let n=[];if(!Array.isArray(e)||!e.length)return n;if(0===e[0][0])for(let r of e[0][1])!function e(t,n){if(Array.isArray(t)){let[r,a,...s]=t;"string"==typeof r&&n(t),s.map(t=>e(t,n))}}(r,e=>{let[r,a,...s]=e;if("Codeblock"===r&&a.meta.type){let e=s.join(""),r=a.blockId;r&&n.push({id:r,meta:a.meta,type:a.meta.type,messageId:t,source:e,language:a.lang,resultId:a.resultId,diffInfo:a.diffInfo,remoteInfo:a.remoteInfo,closed:void 0!==a.closed&&!!a.closed})}});return n}function eg(e){return e&&0===e[0]?"markdown":e&&1===e[0]?"metadata":void 0}function eb(e){var t;let n,r,a;let s=[],l="",i=null===(t=e.find(e=>"metadata"===eg(e)))||void 0===t?void 0:t[1];return i&&("context"in i&&void 0!==i.context&&Array.isArray(i.context)&&(s=i.context),"title"in i&&"string"==typeof i.title&&(l=i.title),"finishReason"in i&&(n=i.finishReason),"usage"in i&&(r=i.usage),"modelId"in i&&(a=i.modelId)),{docsContext:s,title:l,modelId:a,finishReason:n,usage:r}}},2973:(e,t,n)=>{"use strict";n.d(t,{n:()=>r,u:()=>l});let r=new Map;function a(e){if(e.nodeType===e.TEXT_NODE)return["#text",{}];if(e.nodeType!==e.ELEMENT_NODE)return["",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-html"))return["skip",{}];if("SPAN"===e.nodeName&&e.classList.contains("katex-mathml")){var t;return["#text",{},(null===(t=e.querySelector('annotation[encoding="application/x-tex"]'))||void 0===t?void 0:t.textContent)||""]}if("SPAN"===e.nodeName&&(e.classList.contains("linenumber")||e.classList.contains("react-syntax-highlighter-line-number")))return["skip",{}];let n=e.getAttribute("data-seg")||"";if("root"===n||"skip"===n)return[n,{}];let a=r.get(n);return[(null==a?void 0:a.type)||n,(null==a?void 0:a.props)||{}]}let s=new Set(["skip","footnoteReference"]);function l(e,t,n,r){let l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i="";function o(e,t,c,d){let[u,m,f]=a(e);if(s.has(u))return;if("#text"===u){c&&n&&l&&(i+="...");let t="string"==typeof f?f:e.textContent||"";i+=t,d&&r&&l&&(i+="...");return}let h={...t};switch(u){case"Codeblock":if(m.blockId){var p,x;i+=function(e){let{lang:t,project:n,file:r}=e;return"```".concat(t).concat(n?' project="'.concat(n,'"'):"").concat(r?' file="'.concat(r,'"'):"","\n")}({lang:m.lang,project:null===(p=m.meta)||void 0===p?void 0:p.project,file:null===(x=m.meta)||void 0===x?void 0:x.file})+"...\n```\n\n";return}i+="```".concat(m.lang||"","\n");break;case"code":i+="`";break;case"b":case"strong":i+="**";break;case"i":case"em":i+="*";break;case"del":i+="~~";break;case"hr":i+="---";break;case"Math":i+="$$";break;case"InlineMath":i+="$";break;case"li":if(t.ol){let e=m.index||"1";i+="".concat(e,". ")}else t.ul&&(i+="- ");break;case"ol":t.ol=!0;break;case"ul":t.ul=!0;break;case"h1":i+="# ";break;case"h2":i+="## ";break;case"h3":i+="### ";break;case"h4":i+="#### ";break;case"h5":i+="##### ";break;case"h6":i+="###### ";break;case"blockquote":i+="> ";break;case"tr":t.tableCols=0;break;case"th":case"td":t.tableCols=(t.tableCols||0)+1,h.tableCols=t.tableCols,t.tableCols>1&&(i+=" "),i+="| ";break;case"a":i+="["}let g=e.childNodes.length;for(let n=0;n<g;n++)o(e.childNodes[n],t,c&&0===n,d&&n===g-1);switch(u){case"Codeblock":i+="\n```\n\n";break;case"code":i+="`";break;case"b":case"strong":i+="**";break;case"i":case"em":i+="*";break;case"del":i+="~~";break;case"Math":i+="$$";break;case"InlineMath":i+="$";break;case"li":case"tr":i+="\n";break;case"p":case"table":case"hr":case"blockquote":case"ul":case"ol":case"img":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":i+="\n\n";break;case"thead":i+="|-----".repeat(t.tableCols||1)+"\n";break;case"a":i+="](".concat(m.href||"",")")}Object.assign(t,h)}return l?function t(n){let[r,s]=a(n);switch(r){case"ul":return o(e,{ol:!1,ul:!0},!0,!0);case"ol":return o(e,{ol:!0,ul:!1},!0,!0);case"Codeblock":i+="```".concat(s.lang||"","\n"),o(e,{ol:!1,ul:!1},!0,!0),i+="\n```";return;case"blockquote":o(e,{ol:!1,ul:!1},!0,!0),i=i.split("\n").map(e=>"> ".concat(e)).join("\n");return;case"del":i+="~~",o(e,{ol:!1,ul:!1},!0,!0),i+="~~";return;case"h1":return i+="# ",o(e,{ol:!1,ul:!1},!0,!0);case"h2":return i+="## ",o(e,{ol:!1,ul:!1},!0,!0);case"h3":return i+="### ",o(e,{ol:!1,ul:!1},!0,!0);case"h4":return i+="#### ",o(e,{ol:!1,ul:!1},!0,!0);case"h5":return i+="##### ",o(e,{ol:!1,ul:!1},!0,!0);case"h6":return i+="###### ",o(e,{ol:!1,ul:!1},!0,!0);case"table":case"root":case"img":case"Math":return o(e,{ol:!1,ul:!1},!0,!0)}if(n.parentNode){if(n.nodeType===n.ELEMENT_NODE){let t=document.createDocumentFragment(),r=n.cloneNode(!1);r.appendChild(e),t.appendChild(r),e=t}t(n.parentNode)}}(t):o(e,{ol:!1,ul:!1},!0,!0),i.trim()}},24194:(e,t,n)=>{"use strict";n.d(t,{$j:()=>u,KK:()=>l,P8:()=>o,Zm:()=>m,ty:()=>a,w$:()=>s,wA:()=>d,zj:()=>r,zo:()=>i});let r=(e,t,n)=>{if(!e)return;let r=e.findIndex(e=>e===t);return r<0?e:[...e.slice(0,r),n]},a=(e,t)=>void 0===e?[t]:[...e,t],s=e=>e&&e.length>0?e[e.length-1]:void 0,l=(e,t)=>e?[...e.slice(0,e.length-1),t]:a(void 0,t),i=(e,t)=>{if(!e)return;let n=e.findIndex(e=>e===t);if(!(n<0))return e[n-1]},o="<ROOT_MESSAGE>";function c(e){let t=new Map;for(let n of e){let e=n.parentId||o;t.set(e,[...t.get(e)||[],n])}return t}function d(e){let t=c(e),n=new Set,r=new Map,s=(e,l)=>{var i;if(e&&n.has(e.id))return;let c=t.get(e?e.id:o);e&&n.add(e.id);let d=[];for(let e=0;e<(null!==(i=null==c?void 0:c.length)&&void 0!==i?i:0);e++){let t=c[e],n=a(l,t.id);d.push(n),s(t,n)}r.set(e?e.id:o,d)};return s(void 0,void 0),r}function u(e,t){let n=c(e),r=new Set,a=[];return!function e(t){if(!r.has(t))for(let s of(r.add(t),n.get(t)||[]))a.push(s.messageId),e(s.messageId)}(t||o),a}function m(e,t){let n=t,r=c(e),l=s(n)||o,i=r.get(l)||[],d=new Set;for(;i.length>0;){let{id:e}=i[0];if(d.has(e))break;d.add(e),n=a(n,e),i=r.get(e)||[]}return n}},43097:(e,t,n)=>{"use strict";n.d(t,{Vw:()=>v,no:()=>w});var r=n(96261),a=n(30758),s=n(82226);let l=s.z.object({id:s.z.string(),name:s.z.string(),url:s.z.string(),content:s.z.string().optional(),status:s.z.enum(["uploading","done"]).optional(),size:s.z.number(),isImage:s.z.boolean(),isSavedDraft:s.z.boolean().optional(),tokens:s.z.number().optional()}),i="new-chat-prompt-draft",o=s.z.object({version:s.z.literal(1),drafts:s.z.record(s.z.string(),s.z.object({message:s.z.string(),isMessageTrimmed:s.z.boolean().optional(),isExpandedDraft:s.z.boolean().optional(),quote:s.z.string().optional(),inputHeight:s.z.number().optional(),localFileInfos:s.z.array(l),fileMap:s.z.record(s.z.string(),s.z.object({name:s.z.string().optional(),contentType:s.z.string().optional(),url:s.z.string(),size:s.z.number(),isSavedDraft:s.z.boolean().optional()})),updatedAt:s.z.number()}))});var c=n(79995),d=n(86032),u=n(20419),m=n(76811),f=n(14905),h=n(10556);let p="chat-prompt-drafts",x=e=>({version:1,drafts:{[e]:{message:"",localFileInfos:[],fileMap:{},updatedAt:Date.now()}}});function g(e){let t=JSON.parse(JSON.stringify(e));for(let e in t.drafts){for(let n of(t.drafts[e].fileMap={},t.drafts[e].localFileInfos))delete n.content;if(t.drafts[e].localFileInfos=t.drafts[e].localFileInfos.slice(0,3),t.drafts[e].message){let n=t.drafts[e].message.length>=100;t.drafts[e].isMessageTrimmed=n,t.drafts[e].message=n?"":t.drafts[e].message}t.drafts[e].quote&&(t.drafts[e].quote=t.drafts[e].quote.slice(0,200))}(0,r.d8)(a.sA,JSON.stringify(t),{path:"/",maxAge:a.fh})}let b=e=>{let t;let{chatId:n,newData:r}=e,a=n||i,s=localStorage.getItem(p);try{if((t=o.parse(JSON.parse(s||"{}"))).drafts[a]||(t.drafts[a]=x(a).drafts[a]),Object.keys(t.drafts).length>6){let{minKey:e,minValue:n}={minKey:"",minValue:1/0};for(let r in t.drafts)r!==i&&r!==a&&t.drafts[r].updatedAt<n&&(e=r,n=t.drafts[r].updatedAt);e&&delete t.drafts[e]}}catch(e){t=x(a)}t.drafts[a]={...t.drafts[a],...r},t.drafts[a].updatedAt=Date.now();try{localStorage.setItem(p,JSON.stringify(t)),g(t)}catch(e){var l,c;(0,h.j)("PromptDraftSaveError",{errorMsg:e instanceof Error?e.message:String(e),messageLength:null===(l=r.message)||void 0===l?void 0:l.length,quoteLength:null===(c=r.quote)||void 0===c?void 0:c.length})}},v=e=>{let t;let{chatId:n}=e,s=localStorage.getItem(p);try{t=o.parse(JSON.parse(s||"{}")),delete t.drafts[n||i],localStorage.setItem(p,JSON.stringify(t)),g(t)}catch(e){localStorage.removeItem(p),(0,r.kT)(a.sA)}},j=e=>{let t=e||i,n=localStorage.getItem(p);try{let e=o.parse(JSON.parse(n||"{}"));g(e);let r=e.drafts[t];if(!r)return g(e),null;return{...r,source:"localStorage",key:t}}catch(e){return(0,r.kT)(a.sA),localStorage.removeItem(p),null}};function w(){let{chatId:e}=(0,u.ae)(),{isEmpty:t}=(0,m.xN)(),n=(0,f.usePathname)(),{data:r,mutate:a}=(0,d.ZP)(["chat:drafts",t?null:e]);return(0,c.useEffect)(()=>{if((null==r?void 0:r.source)==="cookie"){let n=j(t?void 0:e);a(n?{...n,isExpandedDraft:r.isMessageTrimmed}:null)}},[r,a,t,e]),{setDraft:a,draft:r,handleSavePromptDraft:(0,c.useCallback)(r=>{n.startsWith("/chat/projects")||b({chatId:t?void 0:e,newData:r})},[t,e,n])}}},33831:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,n:()=>s});var r=n(92234);function a(e){let t="[V0_FILE_EDIT]",n=e.split("\n"),a=null,s=[];for(let e of n)if(e.startsWith(t)){let[n,...l]=e.slice(t.length).trim().split(":"),i=function(e){let t;if(!e)return{};let n=/(\w+)=["']([^"']*)["']|(\w+)/g,r={};for(;null!==(t=n.exec(e));)t[1]?r[t[1]]=t[2]:t[3]&&(r[t[3]]="true");return r}(l.join(":"));a&&s.push(a),a={lang:(0,r.l)(n),meta:i,source:""}}else a&&(a.source+=e+"\n");return a&&s.push(a),s}function s(e,t,n){let r=[...e];r[t]={...r[t],source:n};let a="";for(let e of r){let t=Object.entries(e.meta).map(e=>{let[t,n]=e;return"".concat(t,'="').concat(n,'"')}).join(" ");a&&(a+="\n"),a+="[V0_FILE_EDIT]".concat(e.lang).concat(t?":"+t:"","\n")+e.source}return a}},55238:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BlockHistorySelect:()=>m,useBlockHistory:()=>u});var r=n(69160),a=n(79995),s=n(20419),l=n(12885),i=n(31312),o=n(99706),c=n(30758),d=n(18396);let u=e=>{let{blockId:t}=e,{messages:n,activeForkKey:r}=(0,s.RN)(),{allBlocks:i,activeProject:o,activeBlockIndex:c,activeVersionIndex:d,projectBlocks:u,history:m}=(0,a.useMemo)(()=>{let e,a;if(!t)return{allBlocks:[],activeProject:void 0,activeBlockIndex:-1,activeVersionIndex:-1,projectBlocks:[],history:[]};let s={},i=[],o=-1,c=new Set(r);for(let r of n)if(c.has(r.id)&&"assistant"===r.role)for(let n of(0,l.to)(r.content,r.id)){let r=n.meta.project||"";s[r]||(s[r]=[]),n.id===t&&(e=r,a=n.meta.file,o=s[r].length),i.push(n),s[r].push(n)}let d=[],u=-1,m=s[e||""];for(let n=0;n<(m?m.length:0);n++){let r=s[e||""][n];r.id===t&&(u=d.length),r.meta.file===a&&d.push(r)}return{allBlocks:i,activeProject:e,activeBlockIndex:o,activeVersionIndex:u,projectBlocks:s[e||""]||[],history:d}},[n,t,r]);return{history:m,allBlocks:i,projectBlocks:u,projectBlockIndex:c,project:o,currentBlockIndex:d}};function m(e){var t;let{blockId:n,variant:a}=e,{history:s,currentBlockIndex:l}=u({blockId:n}),m=(0,o.sd)();return s.length<=1?null:(0,r.jsxs)(i.Ph,{onValueChange:e=>{let t=s.find(t=>t.id===e);if(m(t),!(null==t?void 0:t.messageId))return;let n=document.getElementById(c.IS),r=null==n?void 0:n.querySelector('[id="'.concat(t.messageId,'"]'));r&&n&&r instanceof HTMLElement&&n.scrollTo({top:r.offsetTop-n.offsetTop,behavior:"smooth"})},value:null===(t=s[l])||void 0===t?void 0:t.id,children:["button"===a?(0,r.jsx)(d.z,{asChild:!0,className:"w-auto",size:"sm",variant:"secondary",children:(0,r.jsxs)(i.i4,{children:["v",l+1]})}):(0,r.jsx)(i.i4,{className:"bg-gray-150 flex h-5 w-fit items-center rounded-md border-none px-1 font-mono text-xs text-gray-600 hover:bg-gray-200 [&_svg]:w-3",children:(0,r.jsxs)("span",{className:"mr-1",children:["v",l+1]})}),(0,r.jsx)(i.Bw,{className:"min-w-0 rounded-xl border-0 p-0.5",children:s.map((e,t)=>(0,r.jsxs)(i.Ql,{"aria-label":"Version ".concat(t+1),className:"rounded-md pl-2 pr-8 [&_span]:left-auto [&_span]:right-2",value:e.id,children:["v",t+1]},e.id))})]})}},76811:(e,t,n)=>{"use strict";n.d(t,{B1:()=>c,US:()=>d,b:()=>u,xN:()=>o});var r=n(86032),a=n(20419),s=n(79995),l=n(736),i=n(43097);function o(){let{chatId:e}=(0,a.ae)(),{data:t,mutate:n}=(0,r.ZP)(["chat:meta",e]),i=(0,s.useRef)(null!=t?t:l.h);return{setMetadata:(0,s.useCallback)(e=>n(t=>({...null!=t?t:i.current,...e})),[n]),...null!=t?t:l.h}}function c(){let{chatId:e}=(0,a.ae)(),{handleSavePromptDraft:t}=(0,i.no)(),{data:n,mutate:l}=(0,r.ZP)(["chat:quote",e]);return{quote:n,setQuote:(0,s.useCallback)(e=>{l(e),t({quote:e||void 0})},[l])}}function d(){let{chatId:e}=(0,a.ae)(),{data:t,mutate:n}=(0,r.ZP)(["chat:shareable",e]);return{shareable:t,setShareable:n}}function u(){let{chatId:e}=(0,a.ae)(),{data:t,mutate:n}=(0,r.ZP)(["chat:privacy",e]);return{chatPrivacy:t,setChatPrivacy:n}}},20419:(e,t,n)=>{"use strict";n.d(t,{RN:()=>d,ae:()=>o,ql:()=>c});var r=n(86032),a=n(58604),s=n(79995),l=n(736),i=n(25964);function o(){let{data:e}=(0,r.ZP)("chat:id");return{chatId:e}}function c(){let{chatId:e}=o(),{saveLeafMessageId:t,cacheForkKey:n}=(0,i.d)(),{mutate:r}=(0,a.kY)();return(0,s.useCallback)(a=>{r(["chat:state",e],r=>{let s=null!=r?r:l.V;return(s.activeForkKey&&n(s.activeForkKey),"function"==typeof a)?{...s,...a(s)}:(a.activeForkKey&&a.saveLeafMessageId&&e&&(delete a.saveLeafMessageId,t({chatId:e,activeForkKey:a.activeForkKey})),{...s,...a})})},[e,r,n,t])}function d(){let{chatId:e}=o(),{data:t}=(0,r.ZP)(["chat:state",e]);return{...null!=t?t:l.V,chatId:null!=e?e:"something_went_wrong"}}},25964:(e,t,n)=>{"use strict";n.d(t,{d:()=>c});var r=n(24194),a=n(78994),s=n(86032),l=n(20419),i=n(79995);async function o(e,t){let{arg:n}=t,a=(0,r.w$)(n.activeForkKey);if(a)return fetch(e,{method:"POST",body:JSON.stringify({chatId:n.chatId,messageId:a})}).then(e=>e.json())}function c(){let{chatId:e}=(0,l.ae)(),{trigger:t}=(0,a.Z)("/chat/api/chat/leaf",o),{data:n,mutate:r}=(0,s.ZP)(["chat:leaf:cache",e],null,{fallbackData:{}}),c=(0,i.useCallback)(e=>{if(!e)return;let t={...n||{}};for(let n of e)t[n]=e;r(t)},[n,r]),d=(0,i.useCallback)(e=>{let{chatId:n,activeForkKey:r}=e;n&&t({chatId:n,activeForkKey:r})},[c,t]);return{cacheForkKey:c,saveLeafMessageId:d,forkKeyCache:n||{},switchForkKey:c}}},48287:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(88375),a=n(79995),s=n(20419),l=n(24194);function i(e){let{messageId:t}=e,{chatId:n,messages:i,activeForkKey:o}=(0,s.RN)(),{user:c}=(0,r.a)(),{botText:d,userMessageId:u,hasDiffs:m}=(0,a.useMemo)(()=>{let e={botText:void 0,userMessageId:void 0,hasDiffs:!1};if(!t||!o)return e;let n=i.findIndex(e=>"id"in e&&e.id===t);if(n<0)return e;let r=i[n],a=r.content,s="assistant"===r.role&&r.hasDiffs;return{botText:a,userMessageId:(0,l.zo)(o,t),hasDiffs:s}},[i,t,o]);return{chatId:n,messageText:d,hasDiffs:m,promptMessageId:u,messageId:t,userId:null==c?void 0:c.id}}},61744:(e,t,n)=>{"use strict";n.d(t,{C:()=>i});var r=n(69160);n(79995);var a=n(39181),s=n(23324);let l=(0,a.j)("inline-flex h-5 items-center gap-0.5 whitespace-nowrap rounded-full px-1.5 text-xs font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground",red:"bg-gs-red-300 text-gs-red-900 hover:bg-gs-red-400",blue:"bg-gs-blue-300 text-gs-blue-900 hover:bg-gs-blue-400",green:"bg-gs-green-300 text-gs-green-900 hover:bg-gs-green-400",purple:"bg-gs-purple-300 text-gs-purple-900 hover:bg-gs-purple-400",amber:"bg-gs-amber-300 text-gs-amber-900 hover:bg-gs-amber-400",teal:"border-teal-100 bg-teal-100 text-teal-700 hover:border-teal-100 hover:bg-teal-100 focus:border-teal-100 focus:bg-teal-100 focus-visible:border-teal-100 focus-visible:bg-teal-100"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:n,...a}=e;return(0,r.jsx)("span",{className:(0,s.cn)(l({variant:n}),t),...a})}},35409:(e,t,n)=>{"use strict";n.d(t,{Yi:()=>o,bZ:()=>c,zs:()=>i});var r=n(69160),a=n(79995),s=n(79400),l=n(23324);let i=s.fC,o=s.xz,c=a.forwardRef((e,t)=>{let{className:n,align:a="center",sideOffset:i=4,...o}=e;return(0,r.jsx)(s.h_,{children:(0,r.jsx)(s.VY,{align:a,className:(0,l.cn)("z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),ref:t,sideOffset:i,...o})})});c.displayName=s.VY.displayName},21270:()=>{},69745:(e,t,n)=>{"use strict";n.d(t,{r:()=>r});let r=(0,n(9509).$)("26b978268231ac5cdf4bc11763d966876066ff8a")},66121:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r});let r=(0,n(9509).$)("dfba741ae1ce03b6992189917f08db9ee30e6f8c")}}]);